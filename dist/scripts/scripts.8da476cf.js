function hideContent(a){"use strict";jQuery(a).parent().find("div.data-content").hide(),jQuery(a).parent().find("#content-help").hide(),jQuery(a).parent().find(".menu-up").hide(),jQuery(a).parent().find(".menu-down").show()}function showContent(a){"use strict";jQuery(a).parent().find("div.data-content").show(),jQuery(a).parent().find("#content-help").show(),jQuery(a).parent().find(".menu-up").show(),jQuery(a).parent().find(".menu-down").hide()}function l(){"use strict";var a=d.createElement("script");a.type="text/javascript",a.async=!0,a.src="https://widget.intercom.io/widget/m9w2ywgr";var b=d.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b)}function showError(a,b){"use strict";var c="alert-danger";2===b&&(c="alert-success");var d='<div class="alert '+c+' alert-dismissible" role="alert"><button type="button" class="close" data-dismiss="alert"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>'+a+"</div>";null!==a&&(-1===window.location.href.indexOf("/login")?(jQuery(".error-container.visible-on").append(d),setTimeout(function(){jQuery(".alert").remove()},3e3)):(jQuery("#login-error-message").append(d),setTimeout(function(){jQuery(".alert").remove()},3e3)))}function base64_encode(a){"use strict";var b,c,d,e,f,g,h,i,j="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=0,l=0,m="",n=[];if(!a)return a;do b=a.charCodeAt(k++),c=a.charCodeAt(k++),d=a.charCodeAt(k++),i=b<<16|c<<8|d,e=i>>18&63,f=i>>12&63,g=i>>6&63,h=63&i,n[l++]=j.charAt(e)+j.charAt(f)+j.charAt(g)+j.charAt(h);while(k<a.length);m=n.join("");var o=a.length%3;return(o?m.slice(0,o-3):m)+"===".slice(o||3)}function start_time_idle(){"use strict";session_timeout.login()}function stop_time_idle(){"use strict";session_timeout.logout()}function uiCodemirrorDirective(a,b){"use strict";function c(a,c,h,i){var j=angular.extend({value:c.text()},b.codemirror||{},a.$eval(h.uiCodemirror),a.$eval(h.uiCodemirrorOpts)),k=d(c,j);e(k,h.uiCodemirror||h.uiCodemirrorOpts,a),f(k,i,a),g(k,h.uiRefresh,a),a.$on("CodeMirror",function(a,b){if(!angular.isFunction(b))throw new Error("the CodeMirror event requires a callback function");b(k)}),angular.isFunction(j.onLoad)&&j.onLoad(k)}function d(a,b){var c;return"TEXTAREA"===a[0].tagName?c=window.CodeMirror.fromTextArea(a[0],b):(a.html(""),c=new window.CodeMirror(function(b){a.append(b)},b)),c}function e(a,b,c){function d(b,c){angular.isObject(b)&&e.forEach(function(d){if(b.hasOwnProperty(d)){if(c&&b[d]===c[d])return;a.setOption(d,b[d])}})}if(b){var e=Object.keys(window.CodeMirror.defaults);c.$watch(b,d,!0)}}function f(a,b,c){b&&(b.$formatters.push(function(a){if(angular.isUndefined(a)||null===a)return"";if(angular.isObject(a)||angular.isArray(a))throw new Error("ui-codemirror cannot use an object or an array as a model");return a}),b.$render=function(){var c=b.$viewValue||"";a.setValue(c)},a.on("change",function(a){var d=a.getValue();d!==b.$viewValue&&c.$evalAsync(function(){b.$setViewValue(d)})}))}function g(b,c,d){c&&d.$watch(c,function(c,d){c!==d&&a(function(){b.refresh()})})}return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return c}}}!function(a,b,c,d){"use strict";a.module("ngLocalize.Version",[]).constant("localeVer","1.2.2"),a.module("ngLocalize",["ngSanitize","ngLocalize.Config","ngLocalize.Events","ngLocalize.InstalledLanguages"]),a.module("ngLocalize.InstalledLanguages",[]).value("localeSupported",["en-US"]).value("localeFallbacks",{en:"en-US"}),a.module("ngLocalize").service("locale",["$injector","$http","$q","$log","$rootScope","$window","localeConf","localeEvents","localeSupported","localeFallbacks",function(b,c,d,e,f,g,h,i,j,k){function l(a){return a&&a.length&&A.test(a)}function m(a){var b=a?a.split("."):"",c="";return b.length>1&&(c=b.slice(0,-1).join(".")),c}function n(a){var b=a?a.split("."):[],c="";return b.length&&(c=b[b.length-1]),c}function o(a){var b,c=null,d=a?a.split("."):[];if(d.length>1)for(c=y,b=0;b<d.length-1;b++){if(!c[d[b]]){c=null;break}c=c[d[b]]}return c}function p(a){var b,d=a?a.split("."):"",g=y,j=h.basePath+"/"+w;if(d.length>1){for(b=0;b<d.length-1;b++)g[d[b]]||(g[d[b]]={}),g=g[d[b]],j+="/"+d[b];g._loading||(g._loading=!0,j+=h.fileExtension,c.get(j).success(function(b){var c,d=m(a);for(c in b)b.hasOwnProperty(c)&&(g[c]=b[c]);delete g._loading,f.$broadcast(i.resourceUpdates),x[d]&&x[d].resolve(d)}).error(function(){e.error("[localizationService] Failed to load: "+j),delete g._loading}))}}function q(a){var b,c;return a=a||h.langFile,c=a+"._LOOKUP_",b=o(c),x[a]||(x[a]=d.defer()),b&&!b._loading?x[a].resolve(a):b||p(c),x[a].promise}function r(b){var c,e,f;if(a.isString(b))c=b.split(",");else{if(!a.isArray(b))throw new Error("locale.ready requires either an Array or comma-separated list.");c=b}return c.length>1?(f=[],c.forEach(function(a){f.push(q(a))}),e=d.all(f)):e=q(b),e}function s(b,c){var d=b,e=0;return c&&(a.isArray(c)?a.forEach(c,function(a,b){d=d.replace("%"+(b+1),a),d=d.replace("{"+(b+1)+"}",a)}):a.forEach(c,function(a,b){++e,d=d.replace("{"+b+"}",a),d=d.replace("%"+b,a),d=d.replace("%"+e,a),d=d.replace("{"+e+"}",a)})),d=d.replace(/\n/g,"<br>")}function t(b,c){var d,f,g,i="",j=!1;return a.isString(b)&&!c&&-1!==b.indexOf(h.delimiter)&&(g=b.split(h.delimiter),b=g[0],c=a.fromJson(g[1])),j=l(b),j?(a.isObject(c)||(c=[c]),d=o(b),d&&!d._loading?(f=n(b),d[f]?i=s(d[f],c):(e.info("[localizationService] Key not found: "+b),i="%%KEY_NOT_FOUND%%")):d||p(b)):i=b,i}function u(b){var c;a.isString(b)?(b=b.trim(),-1!==j.indexOf(b)?c=b:(c=k[b.split("-")[0]],a.isUndefined(c)&&(c=h.defaultLocale))):c=h.defaultLocale,c!==w&&(y={},x={},w=c,f.$broadcast(i.localeChanges,w),f.$broadcast(i.resourceUpdates),z&&z.put(h.cookieName,c))}function v(){return w}var w,x,y,z,A=new RegExp("^[\\w\\.-]+\\.[\\w\\s\\.-]+\\w(:.*)?$");return h.persistSelection&&b.has("$cookieStore")&&(z=b.get("$cookieStore")),u(z?z.get(h.cookieName):g.navigator.userLanguage||g.navigator.language),{ready:r,isToken:l,getPath:m,getKey:n,setLocale:u,getLocale:v,getString:t}}]),a.module("ngLocalize").filter("i18n",["locale",function(a){var b=function(b,c){return a.getString(b,c)};return b.$stateful=!0,b}]),a.module("ngLocalize.Events",[]).constant("localeEvents",{resourceUpdates:"ngLocalizeResourcesUpdated",localeChanges:"ngLocalizeLocaleChanged"}),a.module("ngLocalize").directive("i18n",["$sce","locale","localeEvents","localeConf",function(b,c,d,e){function f(a,c){c!==a.html()&&a.html(b.getTrustedHtml(c))}function g(a,b,d){c.isToken(b)?c.ready(c.getPath(b)).then(function(){f(a,c.getString(b,d))}):f(a,b)}return function(b,c,f){var h;f.$observe("i18n",function(a,b){a&&a!==b&&g(c,a,h)}),a.forEach(f.$attr,function(a,b){e.observableAttrs.test(a)&&f.$observe(b,function(a){!a&&h&&h[b]||(h=h||{},h[b]=f[b],g(c,f.i18n,h))})}),b.$on(d.resourceUpdates,function(){g(c,f.i18n,h)}),b.$on(d.localeChanges,function(){g(c,f.i18n,h)})}}]).directive("i18nAttr",["locale","localeEvents",function(a,b){return function(c,d,e){function f(b,d){var f,h=c.$eval(d),i=[];for(var j in h)f=h[j],a.isToken(f)&&-1===i.indexOf(a.getPath(f))&&i.push(a.getPath(f));a.ready(i).then(function(){var b="";for(var c in h)f=h[c],b=a.getString(f),g[c]!==b&&e.$set(c,g[c]=b)})}var g={};e.$observe("i18nAttr",function(a){a&&f(d,a)}),c.$on(b.resourceUpdates,function(){f(d,e.i18nAttr)}),c.$on(b.localeChanges,function(){f(d,e.i18nAttr)})}}]),a.module("ngLocalize.Config",[]).value("localeConf",{basePath:"languages",defaultLocale:"en-US",sharedDictionary:"common",fileExtension:".lang.json",persistSelection:!0,cookieName:"COOKIE_LOCALE_LANG",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::"})}(this.angular,this,this.document),angular.module("ui.date",[]).constant("uiDateConfig",{}).directive("uiDate",["uiDateConfig","uiDateConverter",function(a,b){"use strict";var c;return c={},angular.extend(c,a),{require:"?ngModel",link:function(c,d,e,f){var g=function(){return angular.extend({},a,c.$eval(e.uiDate))},h=function(){function a(){var a=["Hours","Minutes","Seconds","Milliseconds"],b=angular.isDate(f.$modelValue),c={};b&&angular.forEach(a,function(a){c[a]=f.$modelValue["get"+a]()}),f.$setViewValue(d.datepicker("getDate")),b&&angular.forEach(a,function(a){f.$viewValue["set"+a](c[a])})}var h=!1,i=g();if(f){var j=i.onSelect||angular.noop;i.onSelect=function(b,e){c.$apply(function(){h=!0,a(),j(b,e),d.blur()})};var k=i.beforeShow||angular.noop;i.beforeShow=function(a,b){h=!0,k(a,b)};var l=i.onClose||angular.noop;i.onClose=function(a,b){h=!1,l(a,b)},d.off("blur.datepicker").on("blur.datepicker",function(){h||c.$apply(function(){d.datepicker("setDate",d.datepicker("getDate")),a()})}),f.$render=function(){var a=f.$modelValue;if(angular.isDefined(a)&&null!==a&&!angular.isDate(a)){if(!angular.isString(f.$modelValue))throw new Error("ng-Model value must be a Date, or a String object with a date formatter - currently it is a "+typeof a+" - use ui-date-format to convert it from a string");a=b.stringToDate(e.uiDateFormat,f.$modelValue)}d.datepicker("setDate",a)}}d.data("datepicker")?(d.datepicker("option",i),d.datepicker("refresh")):(d.datepicker(i),d.on("$destroy",function(){d.datepicker("destroy")})),f&&f.$render()};c.$watch(g,h,!0)}}}]).factory("uiDateConverter",["uiDateFormatConfig",function(a){"use strict";function b(b,c){if(b=b||a,c){if(b)return jQuery.datepicker.formatDate(b,c);if(c.toISOString)return c.toISOString()}return null}function c(b,c){if(b=b||a,angular.isString(c)){if(b)return jQuery.datepicker.parseDate(b,c);var d=new Date(c);return isNaN(d.getTime())?null:d}return null}return{stringToDate:c,dateToString:b}}]).constant("uiDateFormatConfig","").directive("uiDateFormat",["uiDateConverter",function(a){"use strict";var b={require:"ngModel",link:function(b,c,d,e){var f=d.uiDateFormat;e.$formatters.unshift(function(b){return a.stringToDate(f,b)}),e.$parsers.push(function(b){return a.dateToString(f,b)})}};return b}]),function(a){"use strict";function b(a){return parseInt(a.replace(/px|%/,""),10)}a.module("scrollable-table",[]).directive("scrollableTable",["$timeout","$q","$parse",function(c,d,e){return{transclude:!0,restrict:"E",scope:{rows:"=watch",sortFn:"="},template:'<div class="scrollableContainer"><div class="headerSpacer"></div><div class="scrollArea" ng-transclude></div></div>',controller:["$scope","$element","$attrs",function(f,g,h){function i(a,b){var c=f.sortExpr.match(/(.+)\s+as\s+(.+)/),d={};d[c[1]]=a;var g=e(c[2])(d);d[c[1]]=b;var h=e(c[2])(d);return g===h?0:g>h?1:-1}function j(a){var b=g.find(".headerSpacer").height(),c=g.find(".scrollArea").scrollTop();g.find(".scrollArea").scrollTop(c+a.position().top-b)}function k(){function a(){0===g.find("table:visible").length?c(a,100):b.resolve()}var b=d.defer();return c(a),b.promise}function l(){g.find("thead th .th-inner").length||g.find("thead th").wrapInner('<div class="th-inner"></div>'),g.find("thead th .th-inner:not(:has(.box))").length&&g.find("thead th .th-inner:not(:has(.box))").wrapInner('<div class="box"></div>'),g.find("table th .th-inner:visible").each(function(c,d){d=a.element(d);var e=d.parent().width(),f=g.find("table th:visible:last"),h=e;if("center"!==f.css("text-align")){var i=g.find(".scrollArea").height()<g.find("table").height();f[0]==d.parent()[0]&&i&&(h+=g.find(".scrollArea").width()-g.find("tbody tr").width(),h=Math.max(h,e))}var j=b(d.parent().css("min-width")),k=d.parent().attr("title");h=Math.max(j,h),d.css("width",h),k||(k=d.find(".title .ng-scope").html()||d.find(".box").html()),d.attr("title",k.trim())}),n.resolve()}function m(){for(var a=k().then(l),b=f.headerResizeHanlers||[],c=0;c<b.length;c++)a=a.then(b[c]);return a}this.getSortExpr=function(){return f.sortExpr},this.isAsc=function(){return f.asc},this.setSortExpr=function(a){f.asc=!0,f.sortExpr=a},this.toggleSort=function(){f.asc=!f.asc},this.doSort=function(a){a?f.rows.sort(function(b,c){var d=a(b,c);return f.asc?d:-1*d}):f.rows.sort(function(a,b){var c=i(a,b);return f.asc?c:-1*c})},this.renderTalble=function(){return k().then(l)},this.getTableElement=function(){return g},this.appendTableResizingHandler=function(a){for(var b=f.headerResizeHanlers||[],c=0;c<b.length;c++)if(b[c].name===a.name)return;b.push(a),f.headerResizeHanlers=b},f.$on("rowSelected",function(a,b){var c=g.find(".scrollArea table tr[row-id='"+b+"']");1===c.length&&d.all([k(),n.promise]).then(function(){j(c)})});var n=d.defer();f.$watch("rows",function(a,b){a&&(m(g.find(".scrollArea").width()),f.sortExpr=null,g.find(".scrollArea").scrollTop(0))}),f.asc=!h.hasOwnProperty("desc"),f.sortAttr=h.sortAttr,g.find(".scrollArea").scroll(function(a){g.find("thead th .th-inner").css("margin-left",0-a.target.scrollLeft)}),f.$on("renderScrollableTable",function(){m(g.find(".scrollArea").width())}),a.element(window).on("resize",function(){f.$apply()}),f.$watch(function(){return g.find(".scrollArea").width()},function(a,b){0>=a*b||m()})}]}}]).directive("sortableHeader",[function(){return{transclude:!0,scope:!0,require:"^scrollableTable",template:'<div class="box"><div ng-mouseenter="enter()" ng-mouseleave="leave()"><div class="title" ng-transclude></div><span class="orderWrapper"><span class="order" ng-show="focused || isActive()" ng-click="toggleSort($event)" ng-class="{active:isActive()}"><i ng-show="isAscending()" class="glyphicon glyphicon-chevron-up"></i><i ng-show="!isAscending()" class="glyphicon glyphicon-chevron-down"></i></span></span></div></div>',link:function(b,c,d,e){var f=d.on||"a as a."+d.col;b.element=a.element(c),b.isActive=function(){return e.getSortExpr()===f},b.toggleSort=function(a){b.isActive()?e.toggleSort():e.setSortExpr(f),e.doSort(b[d.comparatorFn]),a.preventDefault()},b.isAscending=function(){return b.focused&&!b.isActive()?!0:e.isAsc()},b.enter=function(){b.focused=!0},b.leave=function(){b.focused=!1},b.isLastCol=function(){return c.parent().find("th:last-child").get(0)===c.get(0)}}}}]).directive("resizable",["$compile",function(c){return{restrict:"A",priority:0,require:"^scrollableTable",link:function(d,e,f,g){function h(){var b=e.find("table th .th-inner");if(0==b.find(".resize-rod").length){g.getTableElement().find(".scrollArea table").css("table-layout","auto");var f=a.element('<div class="resize-rod" ng-mousedown="resizing($event)"></div>');b.append(c(f)(d))}}function i(){var c=g.getTableElement(),d=1;c.find("table th .th-inner:visible").each(function(c,e){e=a.element(e);var f=e.parent().width(),g=b(e.parent().css("min-width"));f=Math.max(g,f),e.css("left",d),d+=f})}function j(){var c=1,d=g.getTableElement();g.getTableElement().find("table th .th-inner:visible").each(function(e,f){f=a.element(f);var g=f.parent().width(),h=d.find("table th:visible:last"),i=b(f.parent().css("min-width"));g=Math.max(i,g),h[0]!=f.parent()[0]&&f.parent().css("width",g),f.css("left",c),c+=g})}function k(c){var d=g.getTableElement(),e=d.find("table th:visible").length,f=d.find("table th:visible:last");d.find("table th:visible").each(function(d,g){if(g=a.element(g),f.get(0)==g.get(0))return void g.css("width","auto");var h=g.data("width");h=/\d+%$/.test(h)?Math.ceil(c*b(h)/100):c/e,g.css("width",h+"px")}),g.renderTalble().then(j())}g.appendTableResizingHandler(function(){h()}),g.appendTableResizingHandler(function(){var a=g.getTableElement().find(".scrollArea table");"auto"===a.css("table-layout")?i():k(a.parent().width())}),d.resizing=function(c){var d=g.getTableElement().find(".scrollArea").scrollLeft(),e=a.element(c.target).parent(),f=e.parent(),h=b(e.css("left"))+e.width()-d,i=c.pageX,k=a.element(document),l=a.element("body"),m=a.element(".scrollableContainer .resizing-cover"),n=a.element('<div class="scaler">');l.addClass("scrollable-resizing"),m.addClass("active"),a.element(".scrollableContainer").append(n),n.css("left",h),k.bind("mousemove",function(a){var c=a.pageX-i,d=b(n.css("left"))-h,e=f.width(),g=b(f.css("min-width")),j=f.next().width(),k=b(f.next().css("min-width"));i=a.pageX,a.preventDefault(),c>0&&k>=j-d||0>c&&g>=e+d||n.css("left",b(n.css("left"))+c)}),k.bind("mouseup",function(c){c.preventDefault(),n.remove(),l.removeClass("scrollable-resizing"),m.removeClass("active"),k.unbind("mousemove"),k.unbind("mouseup");var d=b(n.css("left"))-h,e=f.width(),i=b(f.css("min-width")),o=f.next().width(),p=b(f.next().css("min-width")),q=g.getTableElement().find(".scrollArea table");"auto"===q.css("table-layout")&&q.find("th .th-inner").each(function(b,c){c=a.element(c);var d=c.parent().width();c.parent().css("width",d)}),q.css("table-layout","fixed"),d>0&&p>=o-d&&(d=o-p),f.next().removeAttr("style"),e+=d,f.css("width",Math.max(i,e)),f.next().css("width",o-d),g.renderTalble().then(j())})}}}}])}(angular),!function(a){"use strict";a.module("ngPrettyJson",[]).directive("prettyJson",["$compile","$templateCache","ngPrettyJsonFunctions",function(b,c,d){var e=a.isDefined;return{restrict:"AE",scope:{json:"=",prettyJson:"=",onEdit:"&"},template:"<div></div>",replace:!0,link:function(f,g,h){var i={},j=null;f.id=h.id||"prettyjson",f.editActivated=!1,f.edition=h.edition,f.aceEditor=void 0!==window.ace;var k=b(c.get("ng-prettyjson/ng-prettyjson-panel.tmpl.html"))(f,function(a,b){b.tmplElt=a});g.removeAttr("id"),g.append(k);var l,m=e(h.json)?"json":"prettyJson",n=function(a){var b=d.syntaxHighlight(a)||"";return b=b.replace(/\{/g,"<span class='sep'>{</span>").replace(/\}/g,"<span class='sep'>}</span>").replace(/\[/g,"<span class='sep'>[</span>").replace(/\]/g,"<span class='sep'>]</span>").replace(/\,/g,"<span class='sep'>,</span>"),e(a)?f.tmplElt.find("pre").html(b):f.tmplElt.find("pre").empty()};l=f.$watch(m,function(b){a.isObject(b)&&e(b.json)?(l(),f.$watch(m+".json",function(a){f.editActivated||n(a),i=a},!0)):(f.editActivated||n(b),i=b),j&&(j.removeListener("change",o),j.setValue(JSON.stringify(b,null,"	")),j.on("change",o),j.resize())},!0);var o=function(){try{i=JSON.parse(j.getValue()),f.parsable=!0}catch(a){f.parsable=!1}f.$apply(function(){})};f.edit=function(){return f.aceEditor?(f.editActivated?(j&&(document.getElementById(f.id).env=null),n(i)):(j=ace.edit(f.id),j.setAutoScrollEditorIntoView(!0),j.setOptions({maxLines:1/0}),j.on("change",o),j.getSession().setMode("ace/mode/json")),void(f.editActivated=!f.editActivated)):void(console&&console.log("'ace lib is missing'"))},f.update=function(){f[m]=i,f.$emit("json-updated",i),f.onEdit&&f.onEdit({newJson:i}),this.edit()}}}}]).factory("ngPrettyJsonFunctions",function(){var b={entities:/((&)|(<)|(>))/g,json:/"(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|(null))\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g},c=["&amp;","&lt;","&gt;"],d=["number","string","key","boolean","null"],e=function(){var a=arguments.length-2;do a--;while(!arguments[a]);return a},f=function(a){var b;if(arguments.length<7)throw new Error("markup() must be called from String.prototype.replace()");return b=e.apply(null,arguments),'<span class="'+d[b]+'">'+a+"</span>"},g=function(){var a;if(arguments.length<5)throw new Error("makeEntities() must be called from String.prototype.replace()");return a=e.apply(null,arguments),c[a-2]},h=function(c){return a.isString(c)||(c=JSON.stringify(c,null,2)),a.isDefined(c)?c.replace(b.entities,g).replace(b.json,f):void 0};return{syntaxHighlight:h,makeEntities:g,markup:f,rx:b}})}(window.angular),function(a){"use strict";a.module("ngPrettyJson").run(["$templateCache",function(a){a.put("ng-prettyjson/ng-prettyjson-panel.tmpl.html",'<div><button ng-click="edit()" ng-show="edition && !editActivated">Edit</button><button ng-click="edit()" ng-show="edition && editActivated">Cancel</button><button ng-click="update()" ng-show="editActivated && parsable">Update</button><pre class="pretty-json" id="{{id}}"></pre></div>')}])}(window.angular),function(a){a.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var b=this;this.element.is("input")?(this.tagList=a("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last(),this.tagInput=a('<input type="text" />').addClass("ui-widget-content"),this.options.readOnly&&this.tagInput.attr("disabled","disabled"),this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex),this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText),this.options.autocomplete.source||(this.options.autocomplete.source=function(b,c){var d=b.term.toLowerCase(),e=a.grep(this.options.availableTags,function(a){return 0===a.toLowerCase().indexOf(d)});this.options.allowDuplicates||(e=this._subtractArray(e,this.assignedTags())),c(e)}),this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(a,c){b._showAutocomplete()}),"undefined"==typeof this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0)),a.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=a.proxy(this.options.autocomplete.source,this)),a.isFunction(this.options.tagSource)&&(this.options.tagSource=a.proxy(this.options.tagSource,this)),this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(a('<li class="tagit-new"></li>').append(this.tagInput)).click(function(c){var d=a(c.target);d.hasClass("tagit-label")?(d=d.closest(".tagit-choice"),d.hasClass("removed")||b._trigger("onTagClicked",c,{tag:d,tagLabel:b.tagLabel(d)})):b.tagInput.focus()});var c=!1;if(this.options.singleField)if(this.options.singleFieldNode){var d=a(this.options.singleFieldNode),e=d.val().split(this.options.singleFieldDelimiter);d.val(""),a.each(e,function(a,d){b.createTag(d,null,!0),c=!0})}else this.options.singleFieldNode=a('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode);c||this.tagList.children("li").each(function(){a(this).hasClass("tagit-new")||(b.createTag(a(this).text(),a(this).attr("class"),!0),a(this).remove())}),this.tagInput.keydown(function(c){if(c.which==a.ui.keyCode.BACKSPACE&&""===b.tagInput.val()){var d=b._lastTag();!b.options.removeConfirmation||d.hasClass("remove")?b.removeTag(d):b.options.removeConfirmation&&d.addClass("remove ui-state-highlight")}else b.options.removeConfirmation&&b._lastTag().removeClass("remove ui-state-highlight");(c.which===a.ui.keyCode.COMMA&&!1===c.shiftKey||c.which===a.ui.keyCode.ENTER||c.which==a.ui.keyCode.TAB&&""!==b.tagInput.val()||c.which==a.ui.keyCode.SPACE&&!0!==b.options.allowSpaces&&('"'!=a.trim(b.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==a.trim(b.tagInput.val()).charAt(0)&&'"'==a.trim(b.tagInput.val()).charAt(a.trim(b.tagInput.val()).length-1)&&0!==a.trim(b.tagInput.val()).length-1))&&(c.which===a.ui.keyCode.ENTER&&""===b.tagInput.val()||c.preventDefault(),b.options.autocomplete.autoFocus&&b.tagInput.data("autocomplete-open")||(b.tagInput.autocomplete("close"),b.createTag(b._cleanedInput())))}).blur(function(a){b.tagInput.data("autocomplete-open")||b.createTag(b._cleanedInput())}),(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)&&(d={select:function(a,c){return b.createTag(c.item.value),!1}},a.extend(d,this.options.autocomplete),d.source=this.options.tagSource||d.source,this.tagInput.autocomplete(d).bind("autocompleteopen.tagit",function(a,c){b.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tagit",function(a,c){b.tagInput.data("autocomplete-open",!1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete"))},destroy:function(){return a.Widget.prototype.destroy.call(this),this.element.unbind(".tagit"),this.tagList.unbind(".tagit"),this.tagInput.removeData("autocomplete-open"),this.tagList.removeClass("tagit ui-widget ui-widget-content ui-corner-all tagit-hidden-field"),this.element.is("input")?(this.element.removeClass("tagit-hidden-field"),this.tagList.remove()):(this.element.children("li").each(function(){a(this).hasClass("tagit-new")?a(this).remove():(a(this).removeClass("tagit-choice ui-widget-content ui-state-default ui-state-highlight ui-corner-all remove tagit-choice-editable tagit-choice-read-only"),a(this).text(a(this).children(".tagit-label").text()))}),this.singleFieldNode&&this.singleFieldNode.remove()),this},_cleanedInput:function(){return a.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var b=this,c=[];return this.options.singleField?(c=a(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===c[0]&&(c=[])):this._tags().each(function(){c.push(b.tagLabel(this))}),c},_updateSingleTagsField:function(b){a(this.options.singleFieldNode).val(b.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(b,c){for(var d=[],e=0;e<b.length;e++)-1==a.inArray(b[e],c)&&d.push(b[e]);return d},tagLabel:function(b){return this.options.singleField?a(b).find(".tagit-label:first").text():a(b).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(b){var c=this,d=null;return this._tags().each(function(e){return c._formatStr(b)==c._formatStr(c.tagLabel(this))?(d=a(this),!1):void 0}),d},_isNew:function(a){return!this._findTagByLabel(a)},_formatStr:function(b){return this.options.caseSensitive?b:a.trim(b.toLowerCase())},_effectExists:function(b){return Boolean(a.effects&&(a.effects[b]||a.effects.effect&&a.effects.effect[b]))},createTag:function(b,c,d){var e=this;if(b=a.trim(b),this.options.preprocessTag&&(b=this.options.preprocessTag(b)),""===b)return!1;if(!this.options.allowDuplicates&&!this._isNew(b))return b=this._findTagByLabel(b),!1!==this._trigger("onTagExists",null,{existingTag:b,duringInitialization:d})&&this._effectExists("highlight")&&b.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:d}),!1;var f=a(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(b),g=a("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(c).append(f);this.options.readOnly?g.addClass("tagit-choice-read-only"):(g.addClass("tagit-choice-editable"),c=a("<span></span>").addClass("ui-icon ui-icon-close"),c=a('<a><span class="text-icon">×</span></a>').addClass("tagit-close").append(c).click(function(a){e.removeTag(g)}),g.append(c)),this.options.singleField||(f=f.html(),g.append('<input type="hidden" value="'+f+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />')),!1!==this._trigger("beforeTagAdded",null,{tag:g,tagLabel:this.tagLabel(g),duringInitialization:d})&&(this.options.singleField&&(f=this.assignedTags(),f.push(b),this._updateSingleTagsField(f)),this._trigger("onTagAdded",null,g),this.tagInput.val(""),this.tagInput.parent().before(g),this._trigger("afterTagAdded",null,{tag:g,tagLabel:this.tagLabel(g),duringInitialization:d}),this.options.showAutocompleteOnFocus&&!d&&setTimeout(function(){e._showAutocomplete()},0))},removeTag:function(b,c){if(c="undefined"==typeof c?this.options.animate:c,b=a(b),this._trigger("onTagRemoved",null,b),!1!==this._trigger("beforeTagRemoved",null,{tag:b,tagLabel:this.tagLabel(b)})){if(this.options.singleField){var d=this.assignedTags(),e=this.tagLabel(b),d=a.grep(d,function(a){return a!=e});this._updateSingleTagsField(d)}if(c){b.addClass("removed");var d=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],f=this;d.push(function(){b.remove(),f._trigger("afterTagRemoved",null,{tag:b,tagLabel:f.tagLabel(b)})}),b.fadeOut("fast").hide.apply(b,d).dequeue()}else b.remove(),this._trigger("afterTagRemoved",null,{tag:b,tagLabel:this.tagLabel(b)})}},removeTagByLabel:function(a,b){var c=this._findTagByLabel(a);if(!c)throw"No such tag exists with the name '"+a+"'";this.removeTag(c,b)},removeAll:function(){var a=this;this._tags().each(function(b,c){a.removeTag(c,!1)})}})}(jQuery),!function(a){a.idleTimer=function(b,c){var d;"object"==typeof b?(d=b,b=null):"number"==typeof b&&(d={timeout:b},b=null),c=c||document,d=a.extend({idle:!1,timeout:3e4,events:"mousemove keydown wheel DOMMouseScroll mousewheel mousedown touchstart touchmove MSPointerDown MSPointerMove"},d);var e=a(c),f=e.data("idleTimerObj")||{},g=function(b){var d=a.data(c,"idleTimerObj")||{};d.idle=!d.idle,d.olddate=+new Date;var e=a.Event((d.idle?"idle":"active")+".idleTimer");a(c).trigger(e,[c,a.extend({},d),b])},h=function(b){var d=a.data(c,"idleTimerObj")||{};if(null==d.remaining){if("mousemove"===b.type){if(b.pageX===d.pageX&&b.pageY===d.pageY)return;if("undefined"==typeof b.pageX&&"undefined"==typeof b.pageY)return;var e=+new Date-d.olddate;if(200>e)return}clearTimeout(d.tId),d.idle&&g(b),d.lastActive=+new Date,d.pageX=b.pageX,d.pageY=b.pageY,d.tId=setTimeout(g,d.timeout)}},i=function(){var b=a.data(c,"idleTimerObj")||{};b.idle=b.idleBackup,b.olddate=+new Date,b.lastActive=b.olddate,b.remaining=null,clearTimeout(b.tId),b.idle||(b.tId=setTimeout(g,b.timeout))},j=function(){var b=a.data(c,"idleTimerObj")||{};null==b.remaining&&(b.remaining=b.timeout-(+new Date-b.olddate),clearTimeout(b.tId))},k=function(){var b=a.data(c,"idleTimerObj")||{};null!=b.remaining&&(b.idle||(b.tId=setTimeout(g,b.remaining)),b.remaining=null)},l=function(){var b=a.data(c,"idleTimerObj")||{};clearTimeout(b.tId),e.removeData("idleTimerObj"),e.off("._idleTimer")},m=function(){var b=a.data(c,"idleTimerObj")||{};if(b.idle)return 0;if(null!=b.remaining)return b.remaining;var d=b.timeout-(+new Date-b.lastActive);return 0>d&&(d=0),d};if(null===b&&"undefined"!=typeof f.idle)return i(),e;if(null===b);else{if(null!==b&&"undefined"==typeof f.idle)return!1;if("destroy"===b)return l(),e;if("pause"===b)return j(),e;if("resume"===b)return k(),e;if("reset"===b)return i(),e;if("getRemainingTime"===b)return m();if("getElapsedTime"===b)return+new Date-f.olddate;if("getLastActiveTime"===b)return f.lastActive;if("isIdle"===b)return f.idle}return e.on(a.trim((d.events+" ").split(" ").join("._idleTimer ")),function(a){h(a)}),f=a.extend({},{olddate:+new Date,lastActive:+new Date,idle:d.idle,idleBackup:d.idle,timeout:d.timeout,remaining:null,tId:null,pageX:null,pageY:null}),f.idle||(f.tId=setTimeout(g,f.timeout)),a.data(c,"idleTimerObj",f),e},a.fn.idleTimer=function(b){return this[0]?a.idleTimer(b,this[0]):this}}(jQuery);var session_timeout={inactiveTimeout:348e4,warningTimeout:6e4,minWarning:6e4,warningStart:null,warningTimer:null,logout:function(){"use strict";jQuery(document).idleTimer("destroy"),clearInterval(session_timeout.warningTimer),clearInterval(session_timeout.keepaliveTimer)},logout2:function(){"use strict";jQuery(document).idleTimer("destroy"),clearInterval(session_timeout.warningTimer),clearInterval(session_timeout.keepaliveTimer),window.location.reload()},login:function(){"use strict";jQuery(document).idleTimer(session_timeout.inactiveTimeout)},keepaliveTimer:null,keepaliveUrl:"",keepaliveInterval:5e3,keepAlive:function(){}};jQuery(document).on("idle.idleTimer",function(a,b,c){"use strict";var d=+new Date-c.lastActive-c.timeout,e=+new Date-d;0>=d&&(d=0),d>=session_timeout.warningTimeout||e<=session_timeout.minWarning?jQuery("#mdlLoggedOut").modal("show"):(jQuery("#sessionSecondsRemaining").html(Math.round((session_timeout.warningTimeout-d)/1e3)),jQuery("#myModal").modal("show"),session_timeout.warningStart=+new Date-d,session_timeout.warningTimer=setInterval(function(){
var a=Math.round(session_timeout.warningTimeout/1e3-(+new Date-session_timeout.warningStart)/1e3);a>=0?jQuery("#sessionSecondsRemaining").html(a):(clearInterval(session_timeout.warningTimer),session_timeout.logout2())},1e3))}),session_timeout.keepaliveTimer=setInterval(function(){"use strict";session_timeout.keepAlive()},session_timeout.keepaliveInterval);var screen="",global_redirect_url="/";$(document).ready(function(){"use strict";$(window).on("hashchange",function(a){var b=[];b.push(window.location.href)}),$(".dropdown-menu").mouseout(function(){$(".dropdown-menu").hide()}),$(window).width()<776?(screen="mobile",$("#mobile").css({display:""}),$("#desktop").css({display:"none"}),$(document.body).find("#login-container").removeClass("login-page")):$(window).width()>776&&(screen="desktop",$("#mobile").css({display:"none"}),$("#desktop").css({display:""}),$(document.body).find("#login-container").addClass("login-page")),$("#dashboard-menu").hide(),$("#navbar.navbar-inverse").after($('<div class="inverse" id="navbar-height-col"></div>')),$("#navbar.navbar-default").after($('<div id="navbar-height-col"></div>'));var a=".navbar-toggle",b="#page-content",c=".navbar-header",d="80%",e="-200%",f="-80%",g=!1;$("#navbar").on("click",a,function(a){var g=$(this).hasClass("slide-active");$("#slidemenu").stop().animate({left:g?e:"0px"}),$("#navbar-height-col").stop().animate({left:g?f:"0px"}),$(b).stop().animate({left:g?"0px":d}),$(c).stop().animate({left:g?"0px":d}),$(this).toggleClass("slide-active",!g),$("#slidemenu").toggleClass("slide-active"),$("#page-content, .navbar, body, .navbar-header").toggleClass("slide-active")});$(window).on("resize",function(){$(window).width()<776&&"desktop"===screen?(this.location.reload(!1),$("#mobile").css({display:""}),$("#desktop").css({display:"none"}),$(".col-md-offset-4.col-md-5").removeClass("login-page"),screen="mobile"):$(window).width()>776&&"mobile"===screen&&(this.location.reload(!1),$("#mobile").css({display:"none"}),$("#desktop").css({display:""}),$(".col-md-offset-4.col-md-5").addClass("login-page"),screen="desktop"),$(window).width()>990&&$(window).width()<1600?$("a#forgot_button").addClass("btn-block"):$("a#forgot_button").removeClass("btn-block")}),$(".collapse-icon").on("click",function(){g===!1?($("#slide-menu").removeAttr("class"),$("#slide-menu").addClass("collapse-icon glyphicon glyphicon-menu-hamburger"),$(".navbar").hide(),$("#dashboard-menu").show(),g=!0):g===!0&&(g=!1,$("#slide-menu").removeAttr("class"),$("#slide-menu").addClass("collapse-icon glyphicon glyphicon-remove"),$(".navbar").show(),$("#dashboard-menu").hide())}),$("#school-history-close").on("click",function(){$("#academic").show()}),$("#school-history-open").on("click",function(){$("#school-history").show()})}),function(){"use strict";function a(a){function b(b,c,d,e){function f(){var a=h.querySelector("tbody tr:first-child td:first-child");return a&&!a.style.width}function g(){angular.element(h.querySelectorAll("thead, tbody, tfoot")).css("display",""),a(function(){angular.forEach(h.querySelectorAll("tr:first-child th"),function(a,b){var c=h.querySelector("tbody tr:first-child td:nth-child("+(b+1)+")"),d=h.querySelector("tfoot tr:first-child td:nth-child("+(b+1)+")"),e=c?c.offsetWidth:a.offsetWidth;c&&(c.style.width=e+"px"),a&&(a.style.width=e+"px"),d&&(d.style.width=e+"px")}),angular.element(h.querySelectorAll("thead, tfoot")).css("display","block"),angular.element(h.querySelectorAll("tbody")).css({display:"block",height:d.tableHeight||"inherit",overflow:"auto"});var a=h.querySelector("tbody"),b=a.offsetWidth-a.clientWidth;if(b>0){b-=2;var c=h.querySelector("tbody tr:first-child td:last-child");c.style.width=c.offsetWidth-b+"px"}})}var h=c[0];b.$watch(f,function(a){a&&g()})}return{restrict:"A",link:b}}angular.module("anguFixedHeaderTable",[]).directive("fixedHeader",a),a.$inject=["$timeout"]}(),function(a){"use strict";function b(a){return new RegExp("(^|\\s+)"+a+"(\\s+|$)")}function c(a,b){var c=d(a,b)?f:e;c(a,b)}var d,e,f;"classList"in document.documentElement?(d=function(a,b){return a.classList.contains(b)},e=function(a,b){a.classList.add(b)},f=function(a,b){a.classList.remove(b)}):(d=function(a,c){return b(c).test(a.className)},e=function(a,b){d(a,b)||(a.className=a.className+" "+b)},f=function(a,c){a.className=a.className.replace(b(c)," ")}),a.classie={hasClass:d,addClass:e,removeClass:f,toggleClass:c,has:d,add:e,remove:f,toggle:c}}(window),$(document).ready(function(){"use strict";var a="open",b=document.getElementById("cbp-spmenu-s1"),c=document.getElementById("showLeftPush"),d=document.getElementById("collapse-sidebarmenu"),e=document.body;c&&(c.onclick=function(){var a=$("#showLeftPush").attr("class");classie.toggle(this,"active"),classie.toggle(e,"cbp-spmenu-push-toright"),classie.toggle(b,"cbp-spmenu-open"),"glyphicon glyphicon-menu-hamburger"===a?$("#showLeftPush").attr("class","glyphicon glyphicon-remove"):"glyphicon glyphicon-remove"===a&&$("#showLeftPush").attr("class","glyphicon glyphicon-menu-hamburger")}),d&&(d.onclick=function(){"open"===a?($("#collapse-sidebarmenu").removeClass("glyphicon glyphicon-remove"),$("#collapse-sidebarmenu").addClass("glyphicon glyphicon-menu-hamburger"),$(".link-nav").css({display:"none"}),$("#border").css({display:"none"}),$("#desktop-nav").css({width:"3%"}),$("#collapse-sidebarmenu").addClass("icon-collapse-menu"),$("#center-panel").css({"margin-left":"3%"}),a="close",$("#footer").addClass("hide")):"close"===a&&($("#collapse-sidebarmenu").removeClass("glyphicon glyphicon-menu-hamburger"),$("#collapse-sidebarmenu").addClass("glyphicon glyphicon-remove"),$(".link-nav").css({display:""}),$("#border").css({display:""}),$("#desktop-nav").css({width:"15%"}),$("#desktop-nav").css({position:"fixed"}),$("#desktop-nav").css({height:"100%"}),$("#collapse-sidebarmenu").removeClass("icon-collapse-menu"),$("#collapse-sidebarmenu").addClass("icon-sidebarmenu"),$("#center-panel").css({"margin-left":"15%"}),a="open",$("#footer").removeClass("hide"))})});var auth_url="",api_url="",url="",origin=window.location.origin;const env="dev";var __local="http://helpinghand.cbo.upward.st",intercom_id="bfu4q2i7",schoolDistricts={seattle:"Seattle",highline:"Highline",federalway:"Federal Way",renton:"Renton",northshore:"North Shore"},relationships={parent:"Parent",grandparent:"Grandparent",aunt:"Aunt",uncle:"Uncle",brother:"Brother",sister:"Sister"},globalConfig={},config={dev:{client_id:"cbo_client_demo",client_secret:"7e98a24f4fe91535348f6e87cde866dca9134b50fc029abefdc7278369f2",response_type:"code",grant_type:"password"},production:{client_id:"studentsuccesslink.org",client_secret:"8cd0ac3761341570c1c0d4caaf2d36900a1c42bdb4474565c72fa5d37a52",response_type:"code",grant_type:"password"},staging:{client_id:"sslstaging.studentsuccesslink.upward.st",client_secret:"ed789e8077173fdaa3fa2430ffc0eec0aef43ac5519ee575aa8409a00195",response_type:"code",grant_type:"password"}};origin.indexOf("studentsuccesslink.org")>0?(auth_url="https://auth.studentsuccesslink.org/api/",api_url="https://api.studentsuccesslink.org/",globalConfig=config.production):origin.indexOf("studentsuccesslink.upward")>0?(auth_url="https://auth.sslstaging.studentsuccesslink.upward.st/api/",api_url="https://api.sslstaging.studentsuccesslink.upward.st/",globalConfig=config.staging):origin.indexOf("cbo.upward")>0?(auth_url="https://auth.cbo.upward.st/api/",api_url="https://api.cbo.upward.st/",globalConfig=config.dev):origin.indexOf("localhost")>0&&(auth_url="https://auth.cbo.upward.st/api/",api_url="https://api.cbo.upward.st/",globalConfig=config.dev);var a={host:"cbo.upwardst.st",api:{url:"https://api.cbo.upward.st"},auth:{url:"https://auth.cbo.upward.st"},token:{expires_in:3600},db:{mongo:{host:"zaenal:zendev@ds037262.mongolab.com:37262",name:"cbo"}},session:{secret:"cbo-2015",saveUninitialized:!0,resave:!0},mandrill:{api_key:"Hg8CvPdPtFMrwHVDbhTTEw"},hzb:{"default":"xsre",sre:{url:"https://psesd.hostedzone.com/svcs/dev",sessionToken:"be860c47-6bd5-4953-aac0-cd8f1ea6bc37",sharedSecret:"zsdKbxbtUk23",object:"sres",service:"sres",contextId:"CBO",headers:{serviceType:"OBJECT",requestType:"IMMEDIATE",requestAction:"QUERY",messageType:"REQUEST",objectType:"sre",Accept:"application/xml","Content-Type":"application/xml"},"validation-url":"http://p2cbo-dev-testsre.azurewebsites.net/api/v1","validation-service":"validation-sre"},xsre:{url:"http://mockhzb.upward.st/svcs/dev",sessionToken:"be860c47-6bd5-4953-aac0-cd8f1ea6bc37",sharedSecret:"zsdKbxbtUk23",object:"xSres",service:"xSres",contextId:"CBO",headers:{serviceType:"OBJECT",requestType:"IMMEDIATE",requestAction:"QUERY",messageType:"REQUEST",objectType:"xSre",Accept:"application/xml","Content-Type":"application/xml"},"validation-url":"http://p2cbo-dev-testsre.azurewebsites.net/api/v1","validation-service":"validation-sre"},prs:{url:"https://p2cbo-dev-prs.azurewebsites.net/api/v1",sessionToken:"4127aa6b-2513-4069-9066-cb5c9a7be2af",sharedSecret:"tqjYW8nXZ3KUPURJYjfQxmNg",headers:{Accept:"application/xml"},"validation-url":"","validation-service":""}},cross:{enable:!0,allow_origin:"*",allow_headers:"Authorization, Origin, X-Requested-With, Content-Type, Accept, X-Cbo-Client-Url",allow_method:"POST, GET, PUT, OPTIONS, DELETE"},salt:"1f3f365ffdf4eb0777899420f0aca20a_test",rollbar:{access_token:"e0f67e505472424ca9728934a41fc416"},aws:{aws_access_key_id:"",aws_secret_access_key:""},cache:{enable:!0,adapter:"redis",backup:"redis",redis:{host:"api.cbo.upward.st",port:"6379",db:0,ttl:86400},memory:{max:100,ttl:60}}},__i=!1;"undefined"!=typeof __local&&(__i=__local);var app=angular.module("CboPortal",["ui.bootstrap","ui.router","ngLocationUpdate","ngRoute","ngCookies","ngPrettyJson","ui.date","anguFixedHeaderTable","scrollable-table","ngLocalize","ui.codemirror","ngLocalize.Config"]).value("localeConf",{basePath:"languages",defaultLocale:"en-US",sharedDictionary:"general",fileExtension:".lang.json",persistSelection:!0,cookieName:"COOKIE_LOCALE_LANG_",observableAttrs:new RegExp("^data-(?!ng-|i18n)"),delimiter:"::"});app.factory("headerInjector",[function(){"use strict";var a={request:function(a){return a.headers["X-Cbo-Client-Url"]=__local,a}};return a}]),app.config(["$httpProvider",function(a){"use strict";a.defaults.headers.common={},a.defaults.headers.get={},a.defaults.headers.post={},a.defaults.headers.put={},a.defaults.headers.patch={},a.defaults.headers.common["Content-Type"]="application/x-www-form-urlencoded",a.defaults.headers.common.Accept="*/*",__i&&a.interceptors.push("headerInjector"),a.defaults.timeout=15e3}]),app.run(["$window","$rootScope","$route",function(a,b){"use strict";b.goBack=function(){a.history.back()},b.data_content="asset/templates/desktop.html",a.innerWidth>767?(b.loginClass="col-md-offset-4 col-md-4 login-page",b.data_content="asset/templates/desktop.html"):a.innerWidth<767&&(b.loginClass="col-md-offset-4 col-md-4 login-page-mobile",b.data_content="asset/templates/mobile.html")}]),app.run(["$state","$stateParams","$rootScope","$http","$location","$window","AuthenticationService","CookieStore","locale",function(a,b,c,d,e,f,g,h,i){"use strict";var j=h.getData(),k=h.checkCookie();i.ready("general").then(function(){c.lang={you_dont_have_any_permission_page:i.getString("general.you_dont_have_any_permission_page"),success_logout:i.getString("general.success_logout"),password_not_match:i.getString("general.password_not_match")}}),c.$on("$routeChangeStart",function(a,b){if(c.doingResolve=!0,null===b||!b.requiredAuthentication||g.isAuthenticated||f.sessionStorage.token||(k===!0?e.path("/loading"):e.path("/login"),c.showNavBar=!1),null!==b&&b.requiredAdmin&&-1!==(g.role+"").indexOf("case-worker")&&(showError(c.lang.you_dont_have_any_permission_page,1),a.preventDefault()),"/login"!==b.$$route.originalPath&&c.doingResolve===!0&&(c.showFooter=!1),"$$route"in b){var d="";"/login"===b.$$route.originalPath&&(c.is_logged_in=!1),"/login"!==b.$$route.originalPath&&"/forget"!==b.$$route.originalPath&&(c.is_logged_in=!0,c.showFooter=!0,d=_.get(b.$$route,"originalPath"),"/program/students/:program_id"===d?d="/program/students/"+_.get(b.params,"program_id"):"/student/backpacks/:student_id"===d?d="/student/backpacks/"+_.get(b.params,"student_id"):"/student/detail/:student_id"===d?d="/student/detail/"+_.get(b.params,"student_id"):"/student/detail/:student_id/:tab_id"===d?d="/student/detail/"+_.get(b.params,"student_id")+"/"+_.get(b.params,"tab_id"):"/student/edit/:student_id"===d?d="/student/edit/"+_.get(b.params,"student_id"):"/student/programs/:student_id/add"===d?d="/student/programs/"+_.get(b.params,"student_id")+"/add":"/student/programs/:student_id"===d?d="/student/programs/"+_.get(b.params,"student_id"):"/program/detail/:program_id"===d?d="/program/detail/"+_.get(b.params,"program_id"):"/program/edit/:program_id"===d?d="/program/edit/"+_.get(b.params,"program_id"):"/program/students/:program_id/add"===d?d="/program/students/"+_.get(b.params,"program_id")+"/add":"/program/students/:program_id/edit/:student_id"===d?d="/program/students/"+_.get(b.params,"program_id")+"/edit/"+_.get(b.params,"student_id"):"/program/students/:program_id"===d?d="/program/students/"+_.get(b.params,"program_id"):"/tag/edit/:tag_id"===d?d="/tag/edit/"+_.get(b.params,"tag_id"):"/user/group/:user_id/add"===d?d="/user/group/"+_.get(b.params,"user_id")+"/add":"/user/group/:user_id"===d?d="/user/group/"+_.get(b.params,"user_id"):"/user/assign/:user_id"===d?d="/user/assign/"+_.get(b.params,"user_id"):"/user/edit/:user_id"===d?d="/user/edit/"+_.get(b.params,"user_id"):"/user/detail/:user_id"===d&&(d="/user/detail/"+_.get(b.params,"user_id")),localStorage.setItem("intended_url",d))}j&&start_time_idle(),"/login"===e.$$path&&(c.showNavBar=!1)}),c.$on("$stateChangeSuccess",function(b,c,d,e){a.previous=e})}]),app.run(["$route","$rootScope","$location",function(a,b,c){"use strict";var d=c.path;c.path=function(e,f){if(f===!1)var g=a.current,h=b.$on("$locationChangeSuccess",function(){a.current=g,h()});return d.apply(c,[e])}}]),$(document).on("shown.bs.tab",'[data-toggle="tab"]',function(a){"use strict";"#transcript"===a.target.dataset.target?$("#school-history-transcript").css({display:""}):$("#school-history-transcript").css({display:"none"})}),!function(a){"use strict";a.module("ngLocationUpdate",[]).run(["$route","$rootScope","$location",function(a,b,c){c.update_path=function(d,e){if(c.path()!=d){var f=a.current;b.$on("$locationChangeSuccess",function(){f&&(a.current=f,f=null)}),c.path(d),e||c.replace()}}}])}(window.angular),app.config(["$routeProvider",function(a){"use strict";a.when("/",{templateUrl:"asset/templates/student/list.html",controller:"StudentController",requiredAuthentication:!0}).when("/student/add",{templateUrl:"asset/templates/student/add.html",controller:"StudentAddController",requiredAuthentication:!0}).when("/student/backpacks/:student_id",{templateUrl:"asset/templates/student/backpacks.html",controller:"StudentBackpackController",requiredAuthentication:!0}).when("/student/detail/:student_id",{templateUrl:"asset/templates/student/detail.html",controller:"StudentDetailController",requiredAuthentication:!0}).when("/student/xsre/:student_id",{templateUrl:"asset/templates/student/xsre.html",controller:"StudentXSreController",requiredAuthentication:!0}).when("/student/edit/:student_id",{templateUrl:"asset/templates/student/edit.html",controller:"StudentEditController",requiredAuthentication:!0}).when("/student/programs/:student_id/add",{templateUrl:"asset/templates/student/program_add.html",controller:"StudentProgramAddController",requiredAuthentication:!0}).when("/student/programs/:student_id",{templateUrl:"asset/templates/student/program_list.html",controller:"StudentProgramController",requiredAuthentication:!0}).when("/student",{templateUrl:"asset/templates/student/list.html",controller:"StudentController",requiredAuthentication:!0}).when("/profile/edit",{templateUrl:"asset/templates/profile/edit.html",controller:"ProfileEditController",requiredAuthentication:!0}).when("/profile",{templateUrl:"asset/templates/profile/detail.html",controller:"ProfileController",requiredAuthentication:!0}).when("/program/add",{templateUrl:"asset/templates/program/add.html",controller:"ProgramAddController",requiredAuthentication:!0}).when("/program/detail/:program_id",{templateUrl:"asset/templates/program/detail.html",controller:"ProgramDetailController",requiredAuthentication:!0}).when("/program/edit/:program_id",{templateUrl:"asset/templates/program/edit.html",controller:"ProgramEditController",requiredAuthentication:!0}).when("/program/students/:program_id/add",{templateUrl:"asset/templates/program/student_add.html",controller:"ProgramStudentAddController",requiredAuthentication:!0}).when("/program/students/:program_id/edit/:student_id",{templateUrl:"asset/templates/program/student_edit.html",controller:"ProgramStudentEditController",requiredAuthentication:!0}).when("/program/students/:program_id",{templateUrl:"asset/templates/program/student_list.html",controller:"ProgramStudentController",requiredAuthentication:!0}).when("/program",{templateUrl:"asset/templates/program/list.html",controller:"ProgramController",requiredAuthentication:!0}).when("/tag/add",{templateUrl:"asset/templates/tag/add.html",controller:"TagAddController",requiredAuthentication:!0,requiredAdmin:!0}).when("/tag/edit/:tag_id",{templateUrl:"asset/templates/tag/edit.html",controller:"TagEditController",requiredAuthentication:!0,requiredAdmin:!0}).when("/tag",{templateUrl:"asset/templates/tag/list.html",controller:"TagController",requiredAuthentication:!0,requiredAdmin:!0}).when("/user/invite",{templateUrl:"asset/templates/user/invite.html",controller:"UserInviteController",requiredAuthentication:!0,requiredAdmin:!0}).when("/user/group/:user_id/add",{templateUrl:"asset/templates/user/group_add.html",controller:"UserGroupAddController",requiredAuthentication:!0,requiredAdmin:!0}).when("/user/group/:user_id",{templateUrl:"asset/templates/user/group.html",controller:"UserGroupController",requiredAuthentication:!0,requiredAdmin:!0}).when("/user/assign/:user_id",{templateUrl:"asset/templates/user/assign.html",controller:"UserAssignController",requiredAuthentication:!0,requiredAdmin:!0}).when("/user/edit/:user_id",{templateUrl:"asset/templates/user/edit.html",controller:"UserEditController",requiredAuthentication:!0,requiredAdmin:!0}).when("/user/detail/:user_id",{templateUrl:"asset/templates/user/detail.html",controller:"UserDetailController",requiredAuthentication:!0}).when("/user",{templateUrl:"asset/templates/user/list.html",controller:"UserController",requiredAuthentication:!0,requiredAdmin:!0}).when("/heartbeat",{templateUrl:"asset/templates/heartbeat/list.html",controller:"HeartbeatController",requiredAuthentication:!0}).when("/login",{templateUrl:"asset/templates/login.html",controller:"LoginController"}).when("/loading",{templateUrl:"asset/templates/loading.html",controller:"LoadingController"}).when("/forget",{templateUrl:"asset/templates/forget.html",controller:"LoginController"}).otherwise({redirectTo:"/"})}]),function(){"use strict";CodeMirror.extendMode("css",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b){return/^[;{}]$/.test(b)}}),CodeMirror.extendMode("javascript",{commentStart:"/*",commentEnd:"*/",newlineAfterToken:function(a,b,c,d){return this.jsonMode?/^[\[,{]$/.test(b)||/^}/.test(c):";"===b&&d.lexical&&")"===d.lexical.type?!1:/^[;{}]$/.test(b)&&!/^;/.test(c)}}),CodeMirror.extendMode("xml",{commentStart:"<!--",commentEnd:"-->",newlineAfterToken:function(a,b,c){return"tag"===a&&/>$/.test(b)||/^</.test(c)}}),CodeMirror.defineExtension("commentRange",function(a,b,c){var d=this,e=CodeMirror.innerMode(d.getMode(),d.getTokenAt(b).state).mode;d.operation(function(){if(a)d.replaceRange(e.commentEnd,c),d.replaceRange(e.commentStart,b),b.line===c.line&&b.ch===c.ch&&d.setCursor(b.line,b.ch+e.commentStart.length);else{var f=d.getRange(b,c),g=f.indexOf(e.commentStart),h=f.lastIndexOf(e.commentEnd);g>-1&&h>-1&&h>g&&(f=f.substr(0,g)+f.substring(g+e.commentStart.length,h)+f.substr(h+e.commentEnd.length)),d.replaceRange(f,b,c)}})}),CodeMirror.defineExtension("autoIndentRange",function(a,b){var c=this;this.operation(function(){for(var d=a.line;d<=b.line;d++)c.indentLine(d,"smart")})}),CodeMirror.defineExtension("autoFormatRange",function(a,b){function c(){i+="\n",k=!0,++j}for(var d=this,e=d.getMode(),f=d.getRange(a,b).split("\n"),g=CodeMirror.copyState(e,d.getTokenAt(a).state),h=d.getOption("tabSize"),i="",j=0,k=0===a.ch,l=0;l<f.length;++l){for(var m=new CodeMirror.StringStream(f[l],h);!m.eol();){var n=CodeMirror.innerMode(e,g),o=e.token(m,g),p=m.current();m.start=m.pos,(!k||/\S/.test(p))&&(i+=p,k=!1),!k&&n.mode.newlineAfterToken&&n.mode.newlineAfterToken(o,p,m.string.slice(m.pos)||f[l+1]||"",n.state)&&c()}!m.pos&&e.blankLine&&e.blankLine(g),k||c()}d.operation(function(){d.replaceRange(i,a,b);for(var c=a.line+1,e=a.line+j;e>=c;++c)d.indentLine(c,"smart");d.setSelection(a,d.getCursor(!1))})})}(),angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),uiCodemirrorDirective.$inject=["$timeout","uiCodemirrorConfig"],app.controller("BodyController",["$rootScope","$scope","$http","$location","CookieStore","AuthenticationService",function(a,b,c,d,e,f,g){"use strict";var h=window.location.hash;-1===h.indexOf("login")&&(a.show_footer=!0),a.full_screen=!1,a.organization_name=e.get("organization_name"),"admin"===e.get("role")?(a.users_link=!0,a.tags_link=!0):(a.users_link=!1,a.tags_link=!1),b.isActive=function(a){var b=a.length,c=d.path(),e=c.substr(0,b);return a===e},b.logoutMe=function(){a.showFooter=!1;var b={token:f.token};angular.isDefined(f.refresh_token)&&(b.refresh_token=f.refresh_token),$(".confidentiality-footer").removeClass("visible-on"),c.post(auth_url+"logout",$.param(b),{}).success(function(){a.showNavBar=!0,e.clearData(),showError(a.lang.success_logout,2),localStorage.setItem("url_intended",""),d.path("/login")}).error(function(){var b=angular.element(document.querySelector("body"));b.removeClass("cbp-spmenu-push"),e.clearData(),showError(a.lang.success_logout,2),d.path("/login")})},b.refreshMe=function(){var a=base64_encode(globalConfig.client_id+":"+globalConfig.client_secret),b=auth_url+"oauth2/token",g={grant_type:"refresh_token",refresh_token:f.refresh_token};c.post(b,$.param(g),{headers:{Authorization:"Basic "+a}}).success(function(a){clearTimeout(session_timeout.warningTimer),e.put("token",a.access_token),e.put("refresh_token",a.refresh_token),f.token=a.access_token,f.refresh_token=a.refresh_token}).error(function(a){e.clearData(),showError(a.message,2),d.path("/login")})},a.doingResolve=!0}]),app.controller("HeartbeatController",["$rootScope","$scope",function(a){"use strict";a.full_screen=!1,a.doingResolve=!1}]),app.controller("HomeController",["$rootScope","$scope",function(a){"use strict";a.full_screen=!1,a.doingResolve=!1}]),app.controller("LoginController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";stop_time_idle(),a.full_screen=!0,a.doingResolve=!1;var g=f.get("remember");g===!0&&(b.login={username:f.get("email"),remember_username:!0}),b.loginMe=function(e,g,h){b.login||(b.login={}),b.login.working=!0;var i=base64_encode(globalConfig.client_id+":"+globalConfig.client_secret),j=encodeURIComponent(globalConfig.grant_type),k=auth_url+"oauth2/token",l={grant_type:j,username:e,password:g,scope:"offline_access"};c.post(k,$.param(l),{headers:{Authorization:"Basic "+i}}).success(function(e){c.get(api_url+"organizations",{headers:{Authorization:"Bearer "+e.access_token}}).success(function(g){a.show_footer=!0;var i=d.host(),j=!1,k=!1,m=!1,n="";if(g.success===!0&&g.total>0){a.organization_name=g.data.name;for(var o=0;o<g.total;o++)if(__i||i===g.data[o].url){j=!0,k=g.data[o]._id,m=g.data[o].url;var p=angular.element(document.querySelector("body"));p.addClass("cbp-spmenu-push"),n=g.data[o].name}}j?c.get(api_url+k+"/users",{headers:{Authorization:"Bearer "+e.access_token}}).success(function(b){if(b.success===!0&&b.total>0){for(var c=!1,g=b.data,i=!1,j="",o="case-worker-restricted",p=0;p<b.total;p++)g[p].email===l.username&&(i=g[p]._id,"undefined"!=typeof g[p].first_name&&g[p].first_name&&(j+=g[p].first_name+" "),"undefined"!=typeof g[p].last_name&&g[p].last_name&&(j+=g[p].last_name),o=g[p].role,"admin"===o?(a.users_link=!0,a.tags_link=!0):(a.users_link=!1,a.tags_link=!1),a.completeName=j,c=!0);c&&(f.setData(e.access_token,e.refresh_token,k,m,i,l.username,j,o,n,e.expires_in),global_redirect_url=m,"undefined"!=typeof h&&h===!0?f.put_remember(!0):f.put_remember(!1)),start_time_idle(),"intended_url"in localStorage&&""!==localStorage.getItem("intended_url")?d.path(localStorage.getItem("intended_url")):d.path("/")}else showError(e.error.message,1);a.doingResolve=!1}).error(function(a){showError(a,1),b.login.working=!1}):(showError(a.lang.you_dont_have_any_permission_page,1),b.login.working=!1)}).error(function(a){showError(a,1),b.login.working=!1})}).error(function(a){showError(a.error_description,1),b.login.working=!1})},b.forgotPassword=function(g){g&&(g.redirect_url=window.location.origin,b.working=!0,c.post(auth_url+"/user/send/forgotpassword",$.param(g),{headers:{Authorization:"Bearer "+e.token}}).success(function(a){a.success===!0?showError(a.message,2):showError(a.message,1),b.working=!1}).error(function(c,e){showError(c,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))}}]),app.controller("ProfileController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,a.doingResolve=!1,a.editable=!1,b.activateEditable=function(){a.editable=!0},c.get(api_url+"user/",{headers:{Authorization:"Bearer "+e.token}}).success(function(c){b.user=c,a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,f.clearData(),d.path("/login"))}),b.editProfile=function(g){if(g)if(b.working=!0,g.password!==g.retype_password)showError(a.lang.password_not_match,1),b.working=!1;else{var h={email:g.email,first_name:g.first_name,middle_name:g.middle_name,last_name:g.last_name,password:g.password,retype_password:g.retype_password};b.working=!0,c.put(api_url+"user/",$.param(h),{headers:{Authorization:"Bearer "+e.token}}).success(function(c){if(c.success===!0){b.working=!1,d.path("/profile"),a.doingResolve=!1,showError(c.message,2);var e="";"undefined"!=typeof h.first_name&&h.first_name&&(e+=h.first_name+" "),"undefined"!=typeof h.last_name&&h.last_name&&(e+=h.last_name),a.completeName=e}else showError(c.message,1);b.working=!1}).error(function(c,e){showError(c.error,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))})}}}]),app.controller("ProfileEditController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,a.doingResolve=!1,b.editProfile=function(g){g&&(b.working=!0,c.put(api_url+"user",$.param(g),{headers:{Authorization:"Bearer "+e.token}}).success(function(c){if(c.success===!0){showError(c.message,2);var e="";"undefined"!=typeof g.first_name&&g.first_name&&(e+=g.first_name+" "),"undefined"!=typeof g.last_name&&g.last_name&&(e+=g.last_name),a.completeName=e,d.path("/profile")}else showError(c.message,1);b.working=!1}).error(function(c,e){showError(c.error,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))},c.get(api_url+"user",{headers:{Authorization:"Bearer "+e.token}}).success(function(c){b.user=c,a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,f.clearData(),d.path("/login"))})}]),app.controller("ProgramAddController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,a.doingResolve=!1,b.addProgram=function(g){g&&(g.redirect_url=e.redirect_url,b.working=!0,c.post(api_url+e.organization_id+"/programs",$.param(g),{headers:{Authorization:"Bearer "+e.token}}).success(function(a){a.success?(showError(a.message,2),b.working=!1,d.path("/program")):(showError(a.message,1),b.working=!1)}).error(function(c,e){showError(c.error,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))}}]),app.controller("ProgramController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,b.programs=[],b.deleteProgram=function(g,h){g&&(b.working=!0,c["delete"](api_url+e.organization_id+"/programs/"+g,{headers:{Authorization:"Bearer "+e.token}}).success(function(a){showError(a.message,2),b.programs.splice(h,1),b.working=!1,d.path("/program")}).error(function(c,e){showError(c,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))},c.get(api_url+e.organization_id+"/programs",{headers:{Authorization:"Bearer "+e.token}}).success(function(c){c.success===!0&&c.total>0?b.programs=c.data:showError(c.error.message,1),a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,f.clearData(),d.path("/login"))})}]),app.controller("ProgramDetailController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore","$filter",function(a,b,c,d,e,f,g,h){"use strict";a.full_screen=!1,a.doingResolve=!1,a.editable=!1;var i=c.program_id;b.activateEditable=function(){a.editable=!0},b.editProgram=function(c){c&&(c.redirect_url=f.redirect_url,b.working=!0,d.put(api_url+f.organization_id+"/programs/"+i,$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){showError(a.message,2),b.working=!1,e.path("program/detail/"+i)}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))})),a.editable=!1},b.deleteProgram=function(c,h){c&&(b.working=!0,d["delete"](api_url+f.organization_id+"/programs/"+c,{headers:{Authorization:"Bearer "+f.token}}).success(function(a){b.working=!1,e.path("/program")}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))},d.get(api_url+f.organization_id+"/programs/"+i,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.program=c,b.program.created=h("date")(new Date(c.created),"MM/dd/yyyy HH:mm:ss"),b.program.last_updated=h("date")(new Date(c.last_updated),"MM/dd/yyyy HH:mm:ss"),a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("ProgramEditController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.program_id;b.editProgram=function(c){c&&(c.redirect_url=f.redirect_url,b.working=!0,d.put(api_url+f.organization_id+"/programs/"+h,$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){showError(a.message,2),b.working=!1,e.path("/program")}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))},d.get(api_url+f.organization_id+"/programs/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.program=c,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("ProgramStudentAddController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h="",i=c.program_id;d.get(api_url+f.organization_id+"/programs/"+i,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.program=c,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/tags",{
headers:{Authorization:"Bearer "+f.token}}).success(function(b){for(var c=[],d=0;d<b.data.length;d++)c.push(b.data[d].name);jQuery("#cohort").tagit({availableTags:c}),a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/students",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){c.success===!0&&c.total>0?b.list_student=c.data:showError(c.error.message,1),a.doingResolve=!1,b.program?b.program.active=!0:b.program={active:!0}}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),b.addProgramStudent=function(c){c&&(null!==c.cohort?h=c.cohort.split(","):("undefined"===c.cohort||"undefined"===c.cohort)&&(h=""),c.cohort=h,b.working=!0,d.post(api_url+f.organization_id+"/programs/"+i+"/students",$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){a.success===!1?(b.working=!1,showError(a.error,1)):(showError(a.message,2),e.path("/program/students/"+i),b.working=!1)}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))}}]),app.controller("ProgramStudentController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.program_id,i="",j="",k="",l="";b.students=[],d.get(api_url+f.organization_id+"/programs/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.program=c,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/programs/"+h+"/students",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){c.success===!0&&c.total>0&&angular.forEach(c.data,function(a,c){l="",angular.forEach(a.programs,function(c,d){if(c.program===h){i=c.active,j=c.participation_start_date,k=c.participation_end_date,l=c.cohort.join();var e={_id:a._id,name:a.first_name+" "+a.last_name,active:i,start_date:j,end_date:k,cohort:l};b.students.push(e)}})}),a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),b.deleteStudent=function(c,i){c&&(b.working=!0,d["delete"](api_url+f.organization_id+"/programs/"+h+"/students/"+c,{headers:{Authorization:"Bearer "+f.token}}).success(function(a){a.success&&(b.students.splice(i,1),b.working=!1,e.path("/program/students/"+h))}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))}}]),app.controller("ProgramStudentEditController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.student_id,i=c.program_id,j="",k="",l="",m="";d.get(api_url+f.organization_id+"/programs/"+i,{headers:{Authorization:"Bearer "+f.token}}).success(function(a){b.program=a}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/programs/"+i+"/students/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){angular.forEach(c.programs,function(a,b){i===a.program&&(k=a.active,l=a.participation_start_date,m=a.participation_end_date,j=a.cohort.join())}),b.student={_id:c._id,name:c.first_name+" "+c.last_name,active:k,participation_start_date:l,participation_end_date:m,cohort:j},d.get(api_url+f.organization_id+"/tags",{headers:{Authorization:"Bearer "+f.token}}).success(function(a){for(var b=[],c=0;c<a.data.length;c++)b.push(a.data[c].name);jQuery("#cohort").tagit({availableTags:b})}).error(function(b){showError(b,1),a.doingResolve=!1,401===status&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),b.editProgramStudent=function(c){c&&(b.working=!0,d.put(api_url+f.organization_id+"/programs/"+i+"/students/"+h,$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){showError(a.message,2),b.working=!1,e.path("/program/students/"+i)}).error(function(c,d){showError(c.error,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))})),a.editable=!1}}]),app.controller("StudentAddController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";var g={},h={};b.schoolDistricts=[],b.relationships=[],a.full_screen=!1,a.doingResolve=!1,$.each(schoolDistricts,function(a,c){g={id:a,name:c},b.schoolDistricts.push(g)}),$.each(relationships,function(a,c){h={id:a,name:c},b.relationships.push(h)}),b.addStudent=function(g){g&&(b.working=!0,c.post(api_url+e.organization_id+"/students",$.param(g),{headers:{Authorization:"Bearer "+e.token}}).success(function(a){a.success===!0?(showError(a.message,2),d.path("/student")):showError(a.message,1),b.working=!1}).error(function(c,e){showError(c.error,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),a.show_footer=!1,d.path("/login"))}))}}]),app.controller("StudentBackpackController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,b.student={};var h=c.student_id;d.get(api_url+f.organization_id+"/students/"+h+"/xsre",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.student=c,a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("StudentController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore","locale","$timeout","$document",function(a,b,c,d,e,f,g,h){"use strict";var i={},j=[],k="",l="";b.district_counter=0,b.school_counter=0,a.full_screen=!1,b.students=[],b.districtData=[],b.schoolNameData=[],b.selected_districts=[],b.selected_schools=[],b.filterSettings={scrollableHeight:"250px",scrollable:!0},b.test="Test",b.filterDistrict=function(){return function(a){if(""===String(b.selected_districts))return b.district_counter=0,!0;b.district_counter=b.selected_districts.length;for(var c in b.selected_districts)if(a.school_district===b.selected_districts[c])return!0}},b.filterSchools=function(){return function(a){if(""===String(b.selected_schools))return b.school_counter=0,!0;b.school_counter=b.selected_schools.length;for(var c in b.selected_schools)if(a.schoolName.replace(/<[^>]+>/gm,"")===b.selected_schools[c].replace(/<[^>]+>/gm,""))return!0}},b.deleteStudent=function(g,h){g&&(b.working=!0,c["delete"](api_url+e.organization_id+"/students/"+g,{headers:{Authorization:"Bearer "+e.token}}).success(function(){b.students.splice(h,1),b.working=!1}).error(function(c,e){showError(c.error,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))};var m=function(h){angular.forEach(b.students,function(i){i.gradeLevel=g.getString("general.retrieving"),i.schoolYear=g.getString("general.retrieving"),i.schoolName=g.getString("general.retrieving"),i.attendance=g.getString("general.retrieving"),i.behavior=g.getString("general.retrieving"),i.onTrackGraduate=g.getString("general.retrieving"),c.get(api_url+e.organization_id+"/students/"+i._id+"?xsre=1",{headers:{Authorization:"Bearer "+e.token},timeout:75e3}).success(function(a){if(a._id in h){var c=_.get(a,"xsre.onTrackToGraduate");k=parseInt(_.get(a,"xsre.behavior"))<=1?g.getString("general.incident",[_.get(a,"xsre.behavior")]):g.getString("general.incidents",[_.get(a,"xsre.behavior")]),l=parseInt(_.get(a,"xsre.attendance"))<=1?g.getString("general.day_missed",[_.get(a,"xsre.attendance")]):g.getString("general.days_missed",[_.get(a,"xsre.attendance")]),c="Y"===c?g.getString("general.on_track"):"N"===c?g.getString("general.off_track"):g.getString("general.unavailable"),b.students[h[a._id]].gradeLevel=_.get(a,"xsre.gradeLevel")||g.getString("general.unavailable"),b.students[h[a._id]].schoolYear=_.get(a,"xsre.schoolYear")||g.getString("general.unavailable"),b.students[h[a._id]].schoolName=_.get(a,"xsre.schoolName")||g.getString("general.unavailable"),b.students[h[a._id]].attendance=_.has(a,"xsre.attendance")?l:g.getString("general.unavailable"),b.students[h[a._id]].behavior=_.has(a,"xsre.behavior")?k:g.getString("general.unavailable"),b.students[h[a._id]].onTrackGraduate=c}else b.students[h[a._id]].gradeLevel=g.getString("general.unavailable"),b.students[h[a._id]].schoolYear=g.getString("general.unavailable"),b.students[h[a._id]].schoolName=g.getString("general.unavailable"),b.students[h[a._id]].attendance=g.getString("general.unavailable"),b.students[h[a._id]].behavior=g.getString("general.unavailable"),b.students[h[a._id]].onTrackGraduate=g.getString("general.unavailable");var d=b.students[h[a._id]].schoolName;if(d){d=String(d).replace(/<[^>]+>/gm,"");var e=b.schoolNameData.some(function(a){return _.includes(a,d)?!0:void 0});e||b.schoolNameData.push({id:d,name:d})}}).error(function(c,e){showError(c,1),401===e?(a.show_footer=!1,f.clearData(),d.path("/login")):(e>=500||null===c&&0===e)&&(b.students[h[i._id]].gradeLevel=g.getString("general.unavailable"),b.students[h[i._id]].schoolYear=g.getString("general.unavailable"),b.students[h[i._id]].schoolName=g.getString("general.unavailable"),b.students[h[i._id]].attendance=g.getString("general.unavailable"),b.students[h[i._id]].behavior=g.getString("general.unavailable"),b.students[h[i._id]].onTrackGraduate=g.getString("general.unavailable"))})})};c.get(api_url+e.organization_id+"/students",{headers:{Authorization:"Bearer "+e.token}}).success(function(c){if(c.success===!0&&c.total>0){var d=[];d="data"in c?c.data:[];var e=0,f={};angular.forEach(d,function(a){$.each(schoolDistricts,function(b,c){(b===a.school_district||c===a.school_district)&&(a.school_district=c)}),a.gradeLevel=g.getString("general.not_ready"),a.schoolYear=g.getString("general.not_ready"),a.schoolName=g.getString("general.not_ready"),a.attendance=g.getString("general.not_ready"),a.behavior=g.getString("general.not_ready"),a.onTrackGraduate=g.getString("general.not_ready"),b.students.push(a),f[a._id]=e,e++,-1===j.indexOf(a.school_district)&&j.push(a.school_district)}),h(function(){m(f)},30),angular.forEach(j,function(a){i={id:a,name:a},b.districtData.push(i)})}else showError(c.error.message,1);a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,f.clearData(),d.path("/login"))})}]),app.controller("StudentDetailController",["$route","$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore","$sce","$window",function(a,b,c,d,e,f,g,h,i,j){"use strict";var k="asset/templates/popoverTemplate.html";c.templateUrl="asset/templates/popoverTemplate.html",b.full_screen=!1,c.student={},c.programs=[],c.list_programs=[],c.icon_legend=!0,c.open_button=!1,c.close=function(){c.open_button=!0,c.icon_legend=!1},c.open=function(){c.icon_legend=!0,c.open_button=!1};var l=d.student_id;c.viewDebug=d.debug?!0:!1,c.sch_history=!1,c.academic=!0,c.showSchoolHistory=function(){c.sch_history=!0},c.closeSchoolHistory=function(){c.sch_history=!1},c.hideIcon=function(a){var b=$(a.target).parent()[0],c=$(b).parent()[0],d=$(c).siblings()[0];$(d).removeClass("hide"),$(c).addClass("hide")},c.showIcon=function(a){var b=$(a.target).prop("id"),c=$(a.target).parent()[0],d=$(c).parent()[0],e=$(d).parent()[0],f=$($(e).siblings(),b),g=$(f).children()[0],h=$(g).children()[0],i=$(g).children()[1];$(h).hasClass("hide")&&$(h).removeClass("hide"),$(i).addClass("hide")},$('[data-toggle="tab"]').on("show.bs.tab",function(a){c.setStudentDetailActiveTab(a.target.dataset.target)}),c.setStudentDetailActiveTab=function(a){localStorage.setItem("activeTabStudentDetail",a)},c.getStudentDetailActiveTab=function(){return localStorage.getItem("activeTabStudentDetail")},c.isStudentDetailActiveTab=function(a,b){var d=c.getStudentDetailActiveTab(),e=d===a||null===d&&0===b;return e},e.get(api_url+g.organization_id+"/students/"+l,{headers:{Authorization:"Bearer "+g.token}}).success(function(a){$.each(schoolDistricts,function(b,c){b===a.school_district&&(a.school_district=c)}),c.student=a,b.doingResolve=!1}).error(function(a,c){showError(a.error,1),b.doingResolve=!1,401===c&&(b.show_footer=!1,h.clearData(),f.path("/login"))});var m=function(){c.loading_icon=!1,$(".loading-icon").removeClass("hide"),e.get(api_url+g.organization_id+"/students/"+l+"/xsre",{headers:{Authorization:"Bearer "+g.token}}).success(function(a){var d={},e=[];if(c.attendanceBehavior=[],c.xsreLastUpdated=null,a.success!==!1&&a.info){a=a.info;var f=c.personal=a.personal;c.case_workers=a._embedded.users,d="users"in a._embedded?a._embedded.users:{},e="programs"in a._embedded?a._embedded.programs:[],c.case_workers=d,c.daysAttendance=parseInt(f.daysInAttendance),c.daysAbsent=parseInt(f.daysAbsent),a.attendanceBehaviors&&angular.forEach(a.attendanceBehaviors,function(a){Object.keys(a).forEach(function(b){var d={};angular.forEach(a[b].detailColumns,function(c,e){if("periods"!==e&&"weeklyChange"!==e){var f=[],g=1,h="";for(angular.forEach(c,function(a,b){if(b>0){var c={};h=g%2===0?"light":"",g++,c="object"==typeof a&&null!==a.event?{slug:a.slug,stripping:h,na:"",fontcolor:a.slug+"-font-color",pagetitle:a.slug.toUpperCase(),eventdate:a.event.calendarEventDate,description:a.event.attendanceStatusTitle,url:k}:{slug:"",stripping:h,na:"n_a",fontcolor:"",pagetitle:"",eventdate:"",description:"",url:""},f.push(c)}});8>g;g++)j={slug:"",stripping:"",na:"",fontcolor:"",pagetitle:"",eventdate:"",description:"",url:""},f.push(j);var i=a[b].behaviors[e];if(i.length>0)angular.forEach(i,function(a,b){var c={};c="object"==typeof a?{slug:"unexcused",stripping:h,na:"",fontcolor:"unexcused-font-color",pagetitle:(a.incidentCategoryTitle+"").toUpperCase(),eventdate:a.incidentDate,description:a.description,url:k}:{slug:"",stripping:"",na:"n_a",fontcolor:"",pagetitle:"",eventdate:"",description:"",url:""},f.push(c)});else{var j={slug:"",stripping:"",na:"n_a",fontcolor:"",pagetitle:"",eventdate:"",description:"",url:""};f.push(j)}if(d[e]=f,a[b].columnHtml=d,a[b].detailColumns.periods.length<7)for(var l=7;l>a[b].detailColumns.periods.length;l--)a[b].detailColumns.periods.push("")}}),a[b].columnHtml=d,c.attendanceBehavior.push(a[b])})}),c.academicInfo={currentSchool:f.enrollment.currentSchool||"N/A",expectedGraduationYear:f.enrollment.expectedGraduationYear||"N/A",gradeLevel:f.enrollment.gradeLevel||"N/A",languageSpokenAtHome:f.languageHome||"N/A",iep:f.ideaIndicator||"N/A",s504:f.section504Status||"N/A",freeReducedLunch:f.eligibilityStatus&&f.enrollmentStatus?f.enrollmentStatus:"N/A"},c.transcripts=a.transcripts||{},c.total_data=_.size(a.transcripts.subject),c.transcripts.subjectOrder=[],_.each(c.transcripts.subject,function(a,b){c.transcripts.subjectOrder.push({name:b,value:a})}),_.each(c.transcripts.details,function(a){a.transcriptsOrder=[],_.each(a.transcripts,function(b,c){a.transcriptsOrder.push({name:c,value:b})})}),c.xsreLastUpdated=a.lastUpdated,angular.forEach(e,function(a){var b={years:new Date(a.participation_start_date).getFullYear(),name:a.program_name,start_date:a.participation_start_date,end_date:new Date(a.participation_end_date)>=Date.now()?"Present":a.participation_end_date,active:a.active?"Active":"Inactive",cohorts:a.cohort};c.programs.push(b)}),c.programs.sort(function(a,b){return a.years>=b.years?-1:1});for(var g={},h=0;h<c.programs.length;h++){var i=c.programs[h];-1===Object.keys(g).indexOf(i.years)&&(g[i.years]=[]),g[i.years].push(i)}angular.forEach(g,function(a,b){c.list_programs.push({years:b,programs:a})})}else showError(a.error,1);c.loading_icon=!0,$(".loading-icon").addClass("hide"),b.doingResolve=!1}).error(function(a,d){c.loading_icon=!0,$(".loading-icon").addClass("hide"),showError(a.error,1),b.doingResolve=!1,401===d&&(b.show_footer=!1,h.clearData(),f.path("/login"))})};m(),c.showDebug=function(){j.open(j.location.origin+"/#/student/xsre/"+l)},c.updateNow=function(){e["delete"](api_url+g.organization_id+"/students/"+l+"/xsre",{headers:{Authorization:"Bearer "+g.token}}).success(function(){m()}).error(function(a,d){c.loading_icon=!0,$(".loading-icon").addClass("hide"),showError(a.error,1),b.doingResolve=!1,401===d&&(b.show_footer=!1,h.clearData(),f.path("/login"))})}}]),app.controller("StudentEditController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,b.student={};var h={},i={};b.schoolDistricts=[],b.relationships=[];var j=c.student_id;$.each(schoolDistricts,function(a,c){h={id:a,name:c},b.schoolDistricts.push(h)}),$.each(relationships,function(a,c){i={id:a,name:c},b.relationships.push(i)}),b.editStudent=function(c){c&&(b.working=!0,d.put(api_url+f.organization_id+"/students/"+j,$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){a.success===!0?(showError(a.message,2),e.path("/student")):showError(a.message,1),b.working=!1}).error(function(c,d){showError(c.error,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))},d.get(api_url+f.organization_id+"/students/"+j,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.student=c,a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("StudentProgramAddController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.student_id;b.program={active:!0},b.addProgramStudent=function(c){c&&(b.working=!0,d.post(api_url+f.organization_id+"/students/"+h+"/programs",$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){a.success===!0?(showError(a.message,2),e.path("/login")):showError(a.error.message,1),b.working=!1}).error(function(c,d){showError(c.error,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))},d.get(api_url+f.organization_id+"/students/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.student=c,a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/tags",{headers:{Authorization:"Bearer "+f.token}}).success(function(b){for(var c=[],d=0;d<b.data.length;d++)c.push(b.data[d].name);jQuery("#cohort").tagit({availableTags:c}),a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/programs",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){c.success===!0&&c.total>0?b.list_program=c.data:showError(c.error.message,1),a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("StudentProgramController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.student_id,i=[];d.get(api_url+f.organization_id+"/students/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.student=c,a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/programs",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){c.success===!0&&c.total>0?(i=c.data,d.get(api_url+f.organization_id+"/students/"+h+"/programs",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){for(var d=0;d<c.data.length;d++)for(var e=0;e<i.length;e++)c.data[d].program===i[e]._id&&(c.data[d].name=i[e].name);b.programs=c.data,a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})):showError(c.error.message,1),a.doingResolve=!1}).error(function(b,c){showError(b.error,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("StudentXSreController",["$route","$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g,h){"use strict";var i=d.student_id;c.refresh=!1,c.snippet="",c.editorOptions={height:"500px",tabSize:6,lineNumbers:!0,readOnly:"nocursor",theme:"monokai",mode:"xml"},e.get(api_url+g.organization_id+"/students/"+i,{headers:{Authorization:"Bearer "+g.token}}).success(function(a){c.student=a,e.get(api_url+g.organization_id+"/students/"+i+"/xsre.xml?raw=1",{headers:{Authorization:"Bearer "+g.token},timeout:15e3}).success(function(a){c.snippet=a,c.refresh=!0,b.doingResolve=!1}).error(function(a,c){b.doingResolve=!1,showError(a,1),401===c&&(b.show_footer=!1,h.clearData(),f.path("/login"))})}).error(function(a,c){showError(a.error,1),b.doingResolve=!1,401===c&&(b.show_footer=!1,h.clearData(),f.path("/login"))})}]),app.controller("TagAddController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,a.doingResolve=!1,b.addTag=function(g){g&&(b.working=!0,c.post(api_url+e.organization_id+"/tags",$.param(g),{headers:{Authorization:"Bearer "+e.token}}).success(function(a){a.success?(showError(a.message,2),b.working=!1,d.path("/tag")):(showError(a.message,1),b.working=!1)}).error(function(c,e){showError(c,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))}}]),app.controller("TagController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,b.tags=[],b.deleteTag=function(g,h){g&&(b.working=!0,c["delete"](api_url+e.organization_id+"/tags/"+g,{headers:{Authorization:"Bearer "+e.token}}).success(function(a){showError(a.message,2),b.tags.splice(h,1),b.working=!1,d.path("/tag")}).error(function(c,e){showError(c,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))},c.get(api_url+e.organization_id+"/tags",{headers:{Authorization:"Bearer "+e.token}}).success(function(c){c.success===!0&&c.total>0?b.tags=c.data:showError(c.error.message,1),a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,f.clearData(),d.path("/login"))})}]),app.controller("TagEditController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.tag_id;b.editTag=function(c){c&&(c.redirect_url=f.redirect_url,b.working=!0,d.put(api_url+f.organization_id+"/tags/"+h,$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){showError(a.message,2),b.working=!1,e.path("/tag")}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))},d.get(api_url+f.organization_id+"/tags/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.tag=c,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("UserAssignController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.user_id;b.addUserStudent=function(c,i){c&&(b.working=!0,d.put(api_url+f.organization_id+"/users/"+h+"/students/"+c,{},{headers:{Authorization:"Bearer "+f.token}}).success(function(a){b.working=!1,a.success?(b.unassigned_students.splice(i,1),showError(a.message,2),e.path("/user/assign/"+h)):showError(a.message,1)}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))},b.deleteStudent=function(c,i){d["delete"](api_url+f.organization_id+"/users/"+h+"/students/"+c,{headers:{Authorization:"Bearer "+f.token}}).success(function(){b.assigned_students.splice(i,1),b.working=!1}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))})};var i={userId:h};d.post(api_url+f.organization_id+"/students?unassigned=true",$.param(i),{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.unassigned_students=c.data,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/users/"+h+"/students",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.assigned_students=c.data,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("UserController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,b.users=[],b.deleteUser=function(g,h){e.user_id===g?showError("Cannot Remove your own data",1):-1!==(e.role+"").indexOf("case-worker")?showError(a.lang.you_dont_have_any_permission_page,1):g&&(b.working=!0,c["delete"](api_url+e.organization_id+"/users/"+g,{headers:{Authorization:"Bearer "+e.token}}).success(function(){b.users.splice(h,1),b.working=!1}).error(function(c,e){showError(c,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))},c.get(api_url+e.organization_id+"/users",{headers:{Authorization:"Bearer "+e.token}}).success(function(c){c.success===!0&&c.total>0?b.users=c.data:showError(c.error.message,1),a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,f.clearData(),d.path("/login"))})}]),app.controller("UserDetailController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.user_id;d.get(api_url+f.organization_id+"/users/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.user=c,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("UserEditController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1,b.disable_select=!1;var h=c.user_id;h===g.get("user_id")&&(b.disable_select=!0,b.working=!0),b.editUser=function(c){if(c){b.working=!0;var i={role:c.role};d.put(api_url+f.organization_id+"/users/"+h,$.param(i),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){a.success===!0?(showError(a.message,2),e.path("/user")):showError(a.message,1),b.working=!1}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}},d.get(api_url+f.organization_id+"/users/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){var d=c.role;b.user={role:d,first_name:c.first_name,last_name:c.last_name,full_name:c.full_name},a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("UserGroupAddController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1;var h=c.user_id;b.students=[],b.new_student=!1,b.addUserStudent=function(c,i){c&&(b.working=!0,i===!0?d.post(api_url+f.organization_id+"/users/"+h+"/students",$.param(c),{headers:{Authorization:"Bearer "+f.token}}).success(function(a){b.working=!1,a.success?(showError(a.message,2),e.path("/user/group/"+h)):showError(a.message,1)}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}):d.put(api_url+f.organization_id+"/users/"+h+"/students/"+c.student_id,{},{headers:{Authorization:"Bearer "+f.token}}).success(function(a){b.working=!1,a.success?(showError(a.message,2),e.path("/user/group/"+h)):showError(a.message,1)}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))}))},d.get(api_url+f.organization_id+"/users/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.user=c,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/students",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){c.success===!0&&c.total>0?b.list_student=c.data:showError(c.error.message,1),a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("UserGroupController",["$rootScope","$scope","$routeParams","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f,g){"use strict";a.full_screen=!1,a.doingResolve=!1,b.user||(b.user={full_name:""});var h=c.user_id;b.deleteStudent=function(c,i){d["delete"](api_url+f.organization_id+"/users/"+h+"/students/"+c,{headers:{Authorization:"Bearer "+f.token}}).success(function(){b.students.splice(i,1),b.working=!1}).error(function(c,d){showError(c,1),b.working=!1,401===d&&(a.show_footer=!1,g.clearData(),e.path("/login"))})},d.get(api_url+f.organization_id+"/users/"+h,{headers:{Authorization:"Bearer "+f.token}}).success(function(c){b.user=c,a.doingResolve=!1}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))}),d.get(api_url+f.organization_id+"/users/"+h+"/students",{headers:{Authorization:"Bearer "+f.token}}).success(function(c){c.success&&(b.students=c.data,a.doingResolve=!1)}).error(function(b,c){showError(b,1),a.doingResolve=!1,401===c&&(a.show_footer=!1,g.clearData(),e.path("/login"))})}]),app.controller("UserInviteController",["$rootScope","$scope","$http","$location","AuthenticationService","CookieStore",function(a,b,c,d,e,f){"use strict";a.full_screen=!1,a.doingResolve=!1,b.user={role:"case-worker-restricted"},b.inviteUser=function(g){g.caseWorkerRestricted=!g.caseWorkerRestricted,g&&(g.redirect_url=e.redirect_url,b.working=!0,c.post(auth_url+"/user/invite",$.param(g),{headers:{Authorization:"Bearer "+e.token}}).success(function(a){a.success===!0?(showError(a.message,2),d.path("/user")):showError(a.message,1),b.working=!1}).error(function(c,e){showError(c,1),b.working=!1,401===e&&(a.show_footer=!1,f.clearData(),d.path("/login"))}))}}]),app.controller("LoadingController",[function(){"use strict"}]),app.filter("flattenRows",function(){"use strict";return function(a){var b=[],c="";return angular.forEach(a,function(a){c=a.courses.course,b.push(a),c&&angular.forEach(c,function(a){b.push(angular.extend(a,{subrow:!0}))})}),b}}),app.filter("unique",function(){"use strict";return function(a,b){var c=[],d=[];return angular.forEach(a,function(a){var e=a[b];-1===d.indexOf(e)&&(d.push(e),c.push(a))}),c}}),app.filter("phonenumber",function(){"use strict";return function(a){if(!a)return"";a=String(a);var b=a,c="1"===a[0]?"1 ":"";a="1"===a[0]?a.slice(1):a;var d=a.substring(0,3),e=a.substring(3,6),f=a.substring(6,10);return e&&(b=c+"("+d+") "+e),f&&(b+="-"+f),b}}),app.directive("attendance",function(){"use strict";return{restrict:"E",scope:{url:"@",slug:"@",stripping:"@",na:"@",fontcolor:"@",pagetitle:"@",eventdate:"@",description:"@"},template:'<div popover-template="url" popover-trigger="mouseenter" popover-placement="right" class="grid-item {{slug}} {{stripping}} {{na}}"></div>'}}),app.directive("dropdownMultiselect",["$document",function(a){"use strict";return{restrict:"E",scope:{model:"=",options:"=",title:"@"},template:"<div class='multiselect'><button class='button filter-btn' ng-click='toggleSelect()'>{{title}}<span class='filter-caret caret'></span></button><ul  class='filter-btn popup' ng-show='isPopupVisible'><li class='list-dropdown-padding' data-ng-repeat='option in options' data-ng-click='setSelectedItem()'>{{option.name}}<span data-ng-class='isChecked(option.id)'></span></li></ul></div>",
link:function(b,c,d){b.isPopupVisible=!1,b.toggleSelect=function(){b.isPopupVisible=!b.isPopupVisible},a.bind("click",function(a){var d=c.find(a.target).length>0;d||(b.isPopupVisible=!1,b.$apply())})},controller:["$scope",function(a){a.setSelectedItem=function(){var b=this.option.id;return _.contains(a.model,b)?a.model=_.without(a.model,b):a.model.push(b),!1},a.isChecked=function(b){return _.contains(a.model,b)?"icon-ok pull-right":!1}}]}}]),app.directive("ngConfirmClick",[function(){"use strict";return{link:function(a,b,c){var d=c.ngConfirmClick||"Are you sure?",e=c.confirmedClick;b.bind("click",function(b){window.confirm(d)&&a.$eval(e)})}}}]),app.directive("contenteditable",function(){"use strict";return{require:"ngModel",link:function(a,b,c,d){var e=c.confirmedAction;b.bind("blur",function(){var c=b.html();a.$apply(function(){d.$setViewValue(b.html())}),b.html(c),a.$eval(e)}),d.render=function(a){b.html(a)},d.$setViewValue(b.html()),b.bind("keydown",function(a){var c=27===a.which,e=a.target;c&&(d.$setViewValue(b.html()),e.blur(),a.preventDefault())})}}}),app.directive("bnDocumentClick",["$document","$parse",function(a,b){"use strict";var c=function(c,d,e){var f=e.bnDocumentClick,g=b(f);a.on("click",function(a){c.$apply(function(){g(c,{$event:a})})})};return c}]),app.directive("phonenumberDirective",["$filter",function(a){"use strict";function b(b,c,d){b.inputValue=b.phonenumberModel,b.$watch("inputValue",function(c,d){c=String(c);var e=c.replace(/[^0-9]+/g,"");b.phonenumberModel=e,b.inputValue=a("phonenumber")(e)})}return{link:b,restrict:"E",scope:{phonenumberPlaceholder:"=placeholder",phonenumberModel:"=model"},template:'<input ng-model="inputValue" type="tel" class="phonenumber form-control" placeholder="{{phonenumberPlaceholder}}" title="Phonenumber (Format: (999) 9999-9999)">'}}]),app.directive("resize",["$window",function(a){"use strict";return function(b,c){var d=angular.element(a);b.getWindowDimensions=function(){return{h:d.height(),w:d.width()}},b.$watch(b.getWindowDimensions,function(a,c){b.windowHeight=a.h,b.windowWidth=a.w,d.innerWidth<767?($rootScope.loginClass="col-md-offset-4 col-md-5 login-page-mobile",$rootScope.data_content="asset/templates/mobile.html"):d.innerWidth>767&&($rootScope.loginClass="col-md-offset-4 col-md-5 login-page",$rootScope.data_content="asset/templates/desktop.html")},!0),d.bind("resize",function(){b.$apply()})}}]),app.directive("a",function(){"use strict";return{restrict:"E",link:function(a,b,c){(c.ngClick||""===c.href||"#"===c.href)&&b.on("click",function(a){a.preventDefault()})}}}),app.directive("listItem",function(){"use strict";return{restrict:"E",scope:{data:"=",slug:"=",event:"=",title:"="},template:'<div class="grid-item {{slug}}" tooltip-html="data"></div>'}}),app.directive("datepicker",function(){"use strict";return{restrict:"E",transclude:!0,scope:{date:"="},link:function(a,b,c){b.datepicker({dateFormat:"mm/dd/yy",onSelect:function(b,c){a.date=b,a.$apply()}})},template:'<input type="text" class="form-control" ng-model="date"/>',replace:!0}}),app.factory("AuthenticationService",function(){"use strict";var a={isAuthenticated:!1,token:null,refresh_token:null,organization_id:null,redirect_url:null,user_id:null,email:null,name:null,role:null,keep_email:!1};return a}),app.factory("CookieStore",["$rootScope","$http","$window","$cookieStore","$location","AuthenticationService",function(a,b,c,d,e,f){"use strict";var g="cboAdmin_cookie_",h=null;return{put:function(a,b){d.put(g+a,b)},get:function(a){return d.get(g+a)},has:function(a){return angular.isDefined(d.get(g+a))},put_remember:function(a){d.put("remember",a)},remove:function(a){d.remove(g+a)},setData:function(b,c,d,e,g,i,j,k,l,m){m&&(h=m),this.put("token",b,m),this.put("refresh_token",c),f.isAuthenticated=!0,f.token=b,f.refresh_token=c,f.organization_id=d,f.redirect_url=e,f.user_id=g,f.email=i,f.name=j,f.role=k,f.organization_name=l,a.showNavBar=!0,a.completeName=f.name},getData:function(){if(!this.has("token")||!this.get("token"))return f.email=null,f.isAuthenticated=!1,f.token=null,f.refresh_token=null,f.organization_id=null,f.redirect_url=null,f.user_id=null,f.name=null,f.role=null,a.showNavBar=!1,a.completeName=!1,e.path("/login"),!1;var c=this.get("token"),d=this.get("refresh_token"),g=e.url();b.get(api_url+"user",{headers:{Authorization:"Bearer "+c}}).success(function(h){b.get(api_url+"organizations",{headers:{Authorization:"Bearer "+c}}).success(function(i){var j=e.host(),k=!1,l=!1,m=!1,n="";if(i.success===!0&&i.total>0){a.organization_name=i.data.name;for(var o=0;o<i.total;o++)if(__i||j===i.data[o].url){k=!0,l=i.data[o]._id,m=i.data[o].url;var p=angular.element(document.querySelector("body"));p.addClass("cbp-spmenu-push"),n=i.data[o].name}}return k?void b.get(api_url+l+"/users",{headers:{Authorization:"Bearer "+c}}).success(function(b){if(b.success===!0&&b.total>0){for(var i=!1,j=b.data,k=!1,o="",p="case-worker-restricted",q=0;q<b.total;q++)j[q].email===h.email&&(k=j[q]._id,"undefined"!=typeof j[q].first_name&&j[q].first_name&&(o+=j[q].first_name+" "),"undefined"!=typeof j[q].last_name&&j[q].last_name&&(o+=j[q].last_name),p=j[q].role,"admin"===p?(a.users_link=!0,a.tags_link=!0):(a.users_link=!1,a.tags_link=!1),a.completeName=o,i=!0);return i?(global_redirect_url=m,f.isAuthenticated=!0,f.token=c,f.refresh_token=d,f.organization_id=l,f.redirect_url=m,f.user_id=k,f.email=h.email,f.name=o,f.role=p,f.organization_name=n,a.showNavBar=!0,a.completeName=f.name,e.path(g),!0):(e.path("/login"),!1)}return e.path("/login"),!1}).error(function(){return e.path("/login"),!1}):(e.path("/login"),!1)}).error(function(){return f.email=null,f.isAuthenticated=!1,f.token=null,f.refresh_token=null,f.organization_id=null,f.redirect_url=null,f.user_id=null,f.name=null,f.role=null,a.showNavBar=!1,a.completeName=!1,e.path("/login"),!1})}).error(function(){return f.email=null,f.isAuthenticated=!1,f.token=null,f.refresh_token=null,f.organization_id=null,f.redirect_url=null,f.user_id=null,f.name=null,f.role=null,a.showNavBar=!1,a.completeName=!1,e.path("/login"),!1})},checkCookie:function(){return this.has("token")&&this.get("token")?!0:!1},clearData:function(){var b=this.get("remember");return b!==!0&&(this.remove("email"),f.email=null),this.remove("token"),this.remove("refresh_token"),f.isAuthenticated=!1,f.token=null,f.refresh_token=null,f.organization_id=null,f.redirect_url=null,f.user_id=null,f.name=null,f.role=null,a.showNavBar=!1,a.completeName=!1,stop_time_idle(),!0}}}]),app.factory("myGoogleAnalytics",["$rootScope","$window","$location",function(a,b,c){"use strict";var d={};return d.sendPageview=function(){b.ga&&(b.ga("set","page",c.path()),b.ga("send","pageview"))},a.$on("$viewContentLoaded",d.sendPageview),d}]);